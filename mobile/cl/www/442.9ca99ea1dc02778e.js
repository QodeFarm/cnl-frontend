"use strict";(self.webpackChunkcnl=self.webpackChunkcnl||[]).push([[442],{4041:(g,s,i)=>{i.r(s),i.d(s,{JournalEntryComponent:()=>C});var e=i(5879),l=i(6814),d=i(3929),u=i(7871),m=i(2787);let c=(()=>{class r{refreshTable(){this.taTableComponent?.refresh()}constructor(t){this.router=t,this.edit=new e.vpe,this.tableConfig={apiUrl:"finance/journal_entries/",showCheckbox:!0,pkId:"journal_entry_id",pageSize:10,globalSearch:{keys:["entry_date","reference","description"]},defaultSort:{key:"created_at",value:"descend"},cols:[{fieldKey:"entry_date",name:"Entry Date",sort:!0},{fieldKey:"reference",name:"Reference",sort:!0},{fieldKey:"description",name:"Description",sort:!0},{fieldKey:"code",name:"Action",type:"action",actions:[{type:"delete",label:"Delete",apiUrl:"finance/journal_entries",confirm:!0,confirmMsg:"Sure to delete?"},{type:"callBackFn",icon:"fa fa-pen",label:"",callBackFn:(n,o)=>{console.log(n),this.edit.emit(n.journal_entry_id)}}]}]}}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(m.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-journal-entry-list"]],viewQuery:function(t,n){if(1&t&&e.Gf(u.Z,5),2&t){let o;e.iGM(o=e.CRH())&&(n.taTableComponent=o.first)}},outputs:{edit:"edit"},standalone:!0,features:[e.jDz],decls:1,vars:1,consts:[[3,"options"]],template:function(t,n){1&t&&e._UZ(0,"ta-table",0),2&t&&e.Q6J("options",n.tableConfig)},dependencies:[l.ez,d.l,u.Z]}),r})();var p=i(9862),f=i(7127);function y(r,a){1&r&&(e.TgZ(0,"span",17),e._uU(1,"Update Journal Entry"),e.qZA())}function h(r,a){1&r&&(e.TgZ(0,"span",17),e._uU(1,"Create Journal Entry"),e.qZA())}function b(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"div",18)(1,"app-journal-entry-list",19),e.NdJ("edit",function(o){e.CHM(t);const _=e.oxw();return e.KtG(_.editJournalEntry(o))}),e.qZA()()}}let C=(()=>{class r{constructor(t){this.http=t,this.showJournalEntryList=!1,this.showForm=!1,this.formConfig={}}ngOnInit(){this.showJournalEntryList=!1,this.showForm=!1,this.JournalEntryEditID=null,this.setFormConfig()}hide(){document.getElementById("modalClose").click()}editJournalEntry(t){this.JournalEntryEditID=t,this.http.get("finance/journal_entries/"+t).subscribe(n=>{n&&n.data&&(this.formConfig.model=n.data,this.formConfig.showActionBtn=!0,this.formConfig.pkId="journal_entry_id",this.formConfig.submit.label="Update",this.formConfig.model.journal_entry_id=this.JournalEntryEditID,this.showForm=!0)}),this.hide()}showJournalEntryListFn(){this.showJournalEntryList=!0,this.JournalEntryListComponent?.refreshTable()}setFormConfig(){this.JournalEntryEditID=null,this.formConfig={url:"finance/journal_entries/",formState:{viewMode:!1},showActionBtn:!0,exParams:[],submit:{label:"Submit",submittedFn:()=>this.ngOnInit()},reset:{resetFn:()=>{this.ngOnInit()}},model:{journal_entry:{},journal_entry_lines:[{}]},fields:[{fieldGroupClassName:"ant-row custom-form-block px-0 mx-0",key:"journal_entry",fieldGroup:[{key:"entry_date",type:"date",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Entry Date",placeholder:"Select date",required:!0},hooks:{onInit:t=>{}}},{key:"reference",type:"input",className:"col-md-4 col-sm-6 col-12",templateOptions:{type:"input",label:"Reference",placeholder:"Enter Reference",required:!1},hooks:{onInit:t=>{}}},{key:"description",type:"textarea",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Description",placeholder:"Enter Description",required:!1}}]},{key:"journal_entry_lines",type:"table",className:"custom-form-list",templateOptions:{title:"Journal Entry Lines",addText:"Add Journal Entry Line",tableCols:[{name:"debit",label:"Debit"},{name:"credit",label:"Credit"},{name:"description",label:"Description"},{name:"account_id",label:"Account"}]},fieldArray:{fieldGroup:[{key:"debit",type:"input",templateOptions:{label:"Debit",placeholder:"Enter Debit",hideLabel:!0,required:!1}},{key:"credit",type:"input",templateOptions:{label:"Credit",placeholder:"Enter Credit",hideLabel:!0,required:!1}},{key:"description",type:"text",templateOptions:{label:"Description",placeholder:"Enter Description",hideLabel:!0,required:!1}},{key:"account",type:"select",templateOptions:{label:"Account",dataKey:"account_id",dataLabel:"account_name",options:[],hideLabel:!0,required:!1,lazy:{url:"finance/chart_of_accounts/",lazyOneTime:!0}},hooks:{onChanges:t=>{t.formControl.valueChanges.subscribe(n=>{const o=t.parent.key;this.formConfig.model.journal_entry_lines[o]||(console.error(`account_id at index ${o} is not defined. Initializing...`),this.formConfig.model.journal_entry_lines[o]={}),this.formConfig.model.journal_entry_lines[o].account_id=n.account_id})}}},{key:"customer",type:"select",templateOptions:{label:"Customer",dataKey:"name",dataLabel:"name",options:[],hideLabel:!0,required:!1,lazy:{url:"customers/customer/",lazyOneTime:!0}},hooks:{onChanges:t=>{t.formControl.valueChanges.subscribe(n=>{const o=t.parent.key;this.formConfig.model.journal_entry_lines[o]||(console.error(`customer_id at index ${o} is not defined. Initializing...`),this.formConfig.model.journal_entry_lines[o]={}),this.formConfig.model.journal_entry_lines[o].customer_id=n.customer_id})}}},{key:"vendor",type:"select",templateOptions:{label:"Vendor",dataKey:"name",dataLabel:"name",options:[],hideLabel:!0,required:!1,lazy:{url:"vendors/vendor_get/",lazyOneTime:!0}},hooks:{onChanges:t=>{t.formControl.valueChanges.subscribe(n=>{const o=t.parent.key;this.formConfig.model.journal_entry_lines[o]||(console.error(`vendor_id at index ${o} is not defined. Initializing...`),this.formConfig.model.journal_entry_lines[o]={}),this.formConfig.model.journal_entry_lines[o].vendor_id=n.vendor_id})}}}]}}]}}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(p.eN))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-journal-entry"]],viewQuery:function(t,n){if(1&t&&e.Gf(c,5),2&t){let o;e.iGM(o=e.CRH())&&(n.JournalEntryListComponent=o.first)}},standalone:!0,features:[e.jDz],decls:22,vars:4,consts:[[1,"container-fluid","p-3"],[1,"leads-banner"],[1,"col-12","px-0",2,"display","flex","justify-content","space-between","align-items","center","flex-wrap","wrap"],["type","button",1,"btn","pl-0",2,"color","black",3,"click"],["class","custom-heading",4,"ngIf"],["type","button","data-bs-toggle","modal","data-bs-target","#leadsListModal",1,"btn","btn-primary",3,"click"],[1,"row","custom-form"],[3,"options"],["id","leadsListModal","tabindex","-1","aria-labelledby","leadsListModalLabel","aria-hidden","true",1,"modal","fade","custom-modal"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header"],["id","leadsListModalLabel",1,"modal-title"],["type","button","id","modalClose","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger"],[1,"custom-heading"],[1,"modal-body"],[1,"custom-list",3,"edit"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),e.NdJ("click",function(){return n.JournalEntryEditID=null}),e.YNc(4,y,2,0,"span",4),e.YNc(5,h,2,0,"span",4),e.qZA(),e.TgZ(6,"button",5),e.NdJ("click",function(){return n.showJournalEntryListFn()}),e._uU(7," Journal List "),e.qZA()()(),e.TgZ(8,"div",6)(9,"div"),e._UZ(10,"ta-form",7),e.qZA()()(),e.TgZ(11,"div",8)(12,"div",9)(13,"div",10)(14,"div",11)(15,"h5",12),e._uU(16,"Edit Journal Entry List"),e.qZA(),e._UZ(17,"button",13),e.qZA(),e.YNc(18,b,2,0,"div",14),e.TgZ(19,"div",15)(20,"button",16),e._uU(21,"Close"),e.qZA()()()()()),2&t&&(e.xp6(4),e.Q6J("ngIf",n.JournalEntryEditID),e.xp6(1),e.Q6J("ngIf",!n.JournalEntryEditID),e.xp6(5),e.Q6J("options",n.formConfig),e.xp6(8),e.Q6J("ngIf",n.showJournalEntryList))},dependencies:[l.ez,l.O5,d.l,f.C,c]}),r})()}}]);