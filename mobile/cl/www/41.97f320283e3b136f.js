"use strict";(self.webpackChunkcnl=self.webpackChunkcnl||[]).push([[41],{7506:(C,p,n)=>{n.d(p,{o:()=>M});var i=n(5879),u=n(6814),f=n(3929),e=n(7871),h=n(2787);let M=(()=>{class c{refreshTable(){this.taTableComponent?.refresh()}constructor(o){this.router=o,this.baseUrl="http://195.35.20.172:8000/api/v1/",this.edit=new i.vpe,this.tableConfig={apiUrl:this.baseUrl+"assets/asset_maintenance/",showCheckbox:!0,pkId:"asset_maintenance_id",pageSize:10,globalSearch:{keys:["asset_id","maintenance_date","asset_id","cost","maintenance_description"]},defaultSort:{key:"created_at",value:"descend"},cols:[{fieldKey:"asset_id",name:"Asset",sort:!0,displayType:"map",mapFn:(l,m,s)=>`${m.asset.name}`},{fieldKey:"cost",name:"Cost",sort:!0},{fieldKey:"maintenance_date",name:"Maintenance Date",sort:!0},{fieldKey:"maintenance_description",name:"Maintenance Description",sort:!0},{fieldKey:"code",name:"Action",type:"action",actions:[{type:"delete",label:"Delete",apiUrl:this.baseUrl+"assets/asset_maintenance"},{type:"callBackFn",icon:"fa fa-pen",label:"",callBackFn:(l,m)=>{console.log(l),this.edit.emit(l.asset_maintenance_id)}}]}]}}}return c.\u0275fac=function(o){return new(o||c)(i.Y36(h.F0))},c.\u0275cmp=i.Xpm({type:c,selectors:[["app-asset-maintenance-list"]],viewQuery:function(o,l){if(1&o&&i.Gf(e.Z,5),2&o){let m;i.iGM(m=i.CRH())&&(l.taTableComponent=m.first)}},outputs:{edit:"edit"},standalone:!0,features:[i.jDz],decls:1,vars:1,consts:[[1,"custom-list",3,"options"]],template:function(o,l){1&o&&i._UZ(0,"ta-table",0),2&o&&i.Q6J("options",l.tableConfig)},dependencies:[u.ez,f.l,e.Z]}),c})()},2041:(C,p,n)=>{n.r(p),n.d(p,{AssetMaintenanceComponent:()=>m});var i=n(6814),u=n(3929),f=n(7506),e=n(5879),h=n(9862),M=n(7127);function c(s,d){1&s&&(e.TgZ(0,"span",17),e._uU(1,"Update Asset Maintenance"),e.qZA())}function _(s,d){1&s&&(e.TgZ(0,"span",17),e._uU(1,"Create Asset Maintenance"),e.qZA())}function o(s,d){if(1&s&&(e.TgZ(0,"div",18),e._UZ(1,"ta-form",19),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("options",t.formConfig)}}function l(s,d){if(1&s){const t=e.EpF();e.TgZ(0,"div",20)(1,"app-asset-maintenance-list",21),e.NdJ("edit",function(r){e.CHM(t);const A=e.oxw();return e.KtG(A.editAssetMaintenance(r))}),e.qZA()()}}let m=(()=>{class s{constructor(t){this.http=t,this.baseUrl="http://195.35.20.172:8000/api/v1/",this.showAssetMaintenanceList=!1,this.showForm=!1,this.formConfig={}}ngOnInit(){this.showAssetMaintenanceList=!1,this.showForm=!0,this.AssetMaintenanceEditID=null,this.setFormConfig(),console.log("this.formConfig",this.formConfig)}hide(){document.getElementById("modalClose").click()}editAssetMaintenance(t){console.log("event",t),this.AssetMaintenanceEditID=t,this.http.get(this.baseUrl+"assets/asset_maintenance/"+t).subscribe(a=>{a&&(this.formConfig.model=a,this.formConfig.showActionBtn=!0,this.formConfig.pkId="asset_maintenance_id",this.formConfig.submit.label="Update",this.formConfig.model.asset_maintenance_id=this.AssetMaintenanceEditID,this.showForm=!0)}),this.hide()}showAssetMaintenanceListFn(){this.showAssetMaintenanceList=!0,this.AssetMaintenanceListComponent?.refreshTable()}setFormConfig(){this.AssetMaintenanceEditID=null,this.formConfig={url:this.baseUrl+"assets/asset_maintenance/",formState:{viewMode:!1},showActionBtn:!0,exParams:[{key:"asset_id",type:"script",value:"data.asset.asset_id"}],submit:{label:"Submit",submittedFn:()=>this.ngOnInit()},reset:{resetFn:()=>{this.ngOnInit()}},model:{},fields:[{fieldGroupClassName:"ant-row custom-form-block px-0 mx-0",fieldGroup:[{key:"asset",type:"select",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Asset",dataKey:"asset_id",dataLabel:"name",options:[],lazy:{url:this.baseUrl+"assets/assets/",lazyOneTime:!0},required:!0},hooks:{onInit:t=>{t.formControl.valueChanges.subscribe(a=>{this.formConfig&&this.formConfig.model&&this.formConfig.model.asset_id?this.formConfig.model.asset_id=a.asset_id:console.error("Form config or asset data model is not defined.")})}}},{key:"cost",type:"input",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Cost",required:!1,placeholder:"Enter cost"},hooks:{onInit:t=>{}}},{key:"maintenance_date",type:"input",className:"col-md-4 col-sm-6 col-12",templateOptions:{type:"date",label:"Maintenance date",placeholder:"Select Maintenance date",required:!1}},{key:"maintenance_description",type:"textarea",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Maintenance Description",required:!1},hooks:{onInit:t=>{}}}]}]}}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(h.eN))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-asset-maintenance"]],viewQuery:function(t,a){if(1&t&&e.Gf(f.o,5),2&t){let r;e.iGM(r=e.CRH())&&(a.AssetMaintenanceListComponent=r.first)}},standalone:!0,features:[e.jDz],decls:21,vars:4,consts:[[1,"container-fluid","p-3"],[1,"asset-maintenance-banner"],[1,"col-12","px-0",2,"display","flex","justify-content","space-between","align-items","center","flex-wrap","wrap"],["type","button",1,"btn","pl-0",2,"color","black",3,"click"],["class","custom-heading",4,"ngIf"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-primary","header-right-btn",3,"click"],[1,"row","custom-form"],["class","col-12 px-1",4,"ngIf"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade","custom-modal"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","id","modalClose","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger"],[1,"custom-heading"],[1,"col-12","px-1"],[3,"options"],[1,"modal-body"],[1,"custom-list",3,"edit"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),e.NdJ("click",function(){return a.AssetMaintenanceEditID=null}),e.YNc(4,c,2,0,"span",4),e.YNc(5,_,2,0,"span",4),e.qZA(),e.TgZ(6,"button",5),e.NdJ("click",function(){return a.showAssetMaintenanceListFn()}),e._uU(7," Asset Maintenance List "),e.qZA()()(),e.TgZ(8,"div",6),e.YNc(9,o,2,1,"div",7),e.qZA()(),e.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e._uU(15,"Edit Asset Maintenance List"),e.qZA(),e._UZ(16,"button",13),e.qZA(),e.YNc(17,l,2,0,"div",14),e.TgZ(18,"div",15)(19,"button",16),e._uU(20,"Close"),e.qZA()()()()()),2&t&&(e.xp6(4),e.Q6J("ngIf",a.AssetMaintenanceEditID),e.xp6(1),e.Q6J("ngIf",!a.AssetMaintenanceEditID),e.xp6(4),e.Q6J("ngIf",a.showForm),e.xp6(8),e.Q6J("ngIf",a.showAssetMaintenanceList))},dependencies:[i.ez,i.O5,u.l,M.C,f.o]}),s})()}}]);