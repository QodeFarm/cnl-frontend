"use strict";(self.webpackChunkcnl=self.webpackChunkcnl||[]).push([[310],{6041:(g,f,s)=>{s.d(f,{Z:()=>h});var _=s(6814),n=s(5879),u=s(3929),e=s(7871);let h=(()=>{class r{constructor(){this.edit=new n.vpe,this.tableConfig={apiUrl:"hrms/employees/",showCheckbox:!0,pkId:"employee_id",pageSize:10,globalSearch:{keys:["hire_date","first_name","last_name","email","phone","address","hire_date","job_type_id","designation_id","department_id","shift_id","manager_id"]},defaultSort:{key:"created_at",value:"descend"},cols:[{fieldKey:"first_name",name:"Name",sort:!0,displayType:"map",mapFn:(i,l,m)=>`${l?.first_name||""} ${l?.last_name||""}`.trim()},{fieldKey:"email",name:"Email",sort:!0},{fieldKey:"phone",name:"Phone",sort:!0},{fieldKey:"address",name:"Address",sort:!0},{fieldKey:"hire_date",name:"Hire Date",sort:!0},{fieldKey:"job_type_id",name:"Job Type",displayType:"map",mapFn:(i,l,m)=>`${l.job_type.job_type_name}`,sort:!0},{fieldKey:"designation_id",name:"Designation",displayType:"map",mapFn:(i,l,m)=>`${l.designation.designation_name}`,sort:!0},{fieldKey:"department_id",name:"Department",displayType:"map",mapFn:(i,l,m)=>`${l.department.department_name}`,sort:!0},{fieldKey:"shift_id",name:"Shift",displayType:"map",mapFn:(i,l,m)=>`${l.shift.shift_name}`,sort:!0},{fieldKey:"manager_id",name:"Manager",sort:!0,displayType:"map",mapFn:(i,l,m)=>`${l.manager?.first_name||""} ${l.manager?.last_name||""}`.trim()},{fieldKey:"code",name:"Action",type:"action",actions:[{type:"delete",label:"Delete",confirm:!0,confirmMsg:"Sure to delete?",apiUrl:"hrms/employees"},{type:"callBackFn",icon:"fa fa-pen",label:"",callBackFn:(i,l)=>{this.edit.emit(i.employee_id)}}]}]}}refreshTable(){this.taTableComponent?.refresh()}}return r.\u0275fac=function(i){return new(i||r)},r.\u0275cmp=n.Xpm({type:r,selectors:[["app-employee-list"]],viewQuery:function(i,l){if(1&i&&n.Gf(e.Z,5),2&i){let m;n.iGM(m=n.CRH())&&(l.taTableComponent=m.first)}},outputs:{edit:"edit"},standalone:!0,features:[n.jDz],decls:1,vars:1,consts:[[1,"custom-list",3,"options"]],template:function(i,l){1&i&&n._UZ(0,"ta-table",0),2&i&&n.Q6J("options",l.tableConfig)},dependencies:[_.ez,u.l,e.Z]}),r})()},9310:(g,f,s)=>{s.r(f),s.d(f,{EmployeesComponent:()=>c});var _=s(6041),n=s(6814),u=s(3929),e=s(5879),h=s(9862),r=s(7127);function p(a,d){1&a&&(e.TgZ(0,"span",17),e._uU(1,"Update Employee"),e.qZA())}function i(a,d){1&a&&(e.TgZ(0,"span",17),e._uU(1,"Create Employee"),e.qZA())}function l(a,d){if(1&a&&(e.TgZ(0,"div",18),e._UZ(1,"ta-form",19),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("options",t.formConfig)}}function m(a,d){if(1&a){const t=e.EpF();e.TgZ(0,"div",20)(1,"app-employee-list",21),e.NdJ("edit",function(y){e.CHM(t);const b=e.oxw();return e.KtG(b.editEmployee(y))}),e.qZA()()}}let c=(()=>{class a{constructor(t){this.http=t,this.showEmployeesList=!1,this.showForm=!1,this.formConfig={}}ngOnInit(){this.showEmployeesList=!1,this.showForm=!0,this.EmployeeEditID=null,this.setFormConfig(),console.log("this.formConfig",this.formConfig)}hide(){document.getElementById("modalClose").click()}editEmployee(t){console.log("event",t),this.EmployeeEditID=t,this.http.get("hrms/employees/"+t).subscribe(o=>{o&&(this.formConfig.model={employee:o.data.employee},this.formConfig.showActionBtn=!0,this.formConfig.pkId="employee_id",this.formConfig.submit.label="Update",this.formConfig.model.employee_id=this.EmployeeEditID,this.showForm=!0)}),this.hide()}showEmployeesListFn(){this.showEmployeesList=!0,this.EmployeeListComponent?.refreshTable()}setFormConfig(){this.EmployeeEditID=null,this.formConfig={url:"hrms/employees/",formState:{viewMode:!1},showActionBtn:!0,exParams:[{key:"job_type_id",type:"script",value:"data.job_type.job_type_id"},{key:"designation_id",type:"script",value:"data.designation.designation_id"},{key:"job_code_id",type:"script",value:"data.job_code.job_code_id"},{key:"department_id",type:"script",value:"data.department.department_id"},{key:"shift_id",type:"script",value:"data.shift.shift_id"},{key:"manager_id",type:"script",value:"data.manager.employee_id"}],submit:{label:"Submit",submittedFn:()=>this.ngOnInit()},reset:{resetFn:()=>{this.ngOnInit()}},model:{employee:{}},fields:[{key:"employee",fieldGroupClassName:"ant-row custom-form-block px-0 mx-0",fieldGroup:[{key:"first_name",type:"input",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"First Name",placeholder:"Enter First Name",required:!0}},{key:"last_name",type:"input",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Last Name",placeholder:"Enter Last Name",required:!0}},{key:"phone",type:"input",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Phone",placeholder:"Enter with country code",required:!0}},{key:"gender",type:"select",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Gender",required:!0,options:[{value:"Female",label:"Female"},{value:"Male",label:"Male"}]}},{key:"job_type",type:"select",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Job Type",dataKey:"job_type_id",dataLabel:"job_type_name",options:[],lazy:{url:"hrms/job_types/",lazyOneTime:!0},required:!0},hooks:{onChanges:t=>{t.formControl.valueChanges.subscribe(o=>{this.formConfig&&this.formConfig.model&&this.formConfig.model.employee?this.formConfig.model.employee.job_type_id=o.job_type_id:console.error("Form config or job_type data model is not defined.")})}}},{key:"designation",type:"select",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Designation",dataKey:"designation_id",dataLabel:"designation_name",options:[],lazy:{url:"hrms/designations/",lazyOneTime:!0},required:!1},hooks:{onChanges:t=>{t.formControl.valueChanges.subscribe(o=>{this.formConfig&&this.formConfig.model&&this.formConfig.model.employee?this.formConfig.model.employee.designation_id=o.designation_id:console.error("Form config or designation data model is not defined.")})}}},{key:"job_code",type:"select",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Job Code",dataKey:"job_code_id",dataLabel:"job_code",options:[],lazy:{url:"hrms/job_codes/",lazyOneTime:!0},required:!1},hooks:{onChanges:t=>{t.formControl.valueChanges.subscribe(o=>{this.formConfig&&this.formConfig.model&&this.formConfig.model.employee?this.formConfig.model.employee.job_code_id=o.job_code_id:console.error("Form config or job_code data model is not defined.")})}}},{key:"department",type:"select",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Department",dataKey:"department_id",dataLabel:"department_name",options:[],lazy:{url:"hrms/departments/",lazyOneTime:!0},required:!1},hooks:{onChanges:t=>{t.formControl.valueChanges.subscribe(o=>{this.formConfig&&this.formConfig.model&&this.formConfig.model.employee?this.formConfig.model.employee.department_id=o.department_id:console.error("Form config or department data model is not defined.")})}}},{key:"shift",type:"select",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Shift",dataKey:"shift_id",dataLabel:"shift_name",options:[],lazy:{url:"hrms/shifts/",lazyOneTime:!0},required:!1},hooks:{onChanges:t=>{t.formControl.valueChanges.subscribe(o=>{this.formConfig&&this.formConfig.model&&this.formConfig.model.employee?this.formConfig.model.employee.shift_id=o.shift_id:console.error("Form config or shift data model is not defined.")})}}},{key:"manager",type:"select",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Manager",dataKey:"employee_id",dataLabel:"first_name",options:[],lazy:{url:"hrms/employees/",lazyOneTime:!0},required:!1},hooks:{onChanges:t=>{t.formControl.valueChanges.subscribe(o=>{this.formConfig&&this.formConfig.model&&this.formConfig.model.employee?this.formConfig.model.employee.manager_id=o.employee_id:console.error("Form config or employee data model is not defined.")})}}},{key:"hire_date",type:"input",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Hire Date",type:"date",placeholder:"Select Hire Date and Time",required:!1}},{key:"email",type:"input",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Email",placeholder:"Enter Email",required:!1}},{key:"address",type:"textarea",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Address",placeholder:"Enter Address",required:!1}},{key:"date_of_birth",type:"input",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Date Of Birth",type:"date",placeholder:"Select Date",required:!1}},{key:"nationality",type:"input",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Nationality",placeholder:"Enter Nationality",required:!1}},{key:"emergency_contact",type:"input",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Emergency Contact",placeholder:"Enter Emergency Contact",required:!1}},{key:"emergency_contact_relationship",type:"input",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Emergency Contact Relationship",placeholder:"Enter Name",required:!1}}]}]}}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(h.eN))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-hrms"]],viewQuery:function(t,o){if(1&t&&e.Gf(_.Z,5),2&t){let y;e.iGM(y=e.CRH())&&(o.EmployeeListComponent=y.first)}},standalone:!0,features:[e.jDz],decls:21,vars:4,consts:[[1,"container-fluid","p-3"],[1,"employee-banner"],[1,"col-12","px-0",2,"display","flex","justify-content","space-between","align-items","center","flex-wrap","wrap"],["type","button",1,"btn","pl-0"],["class","custom-heading",4,"ngIf"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-primary",3,"click"],[1,"row","custom-form"],["class","col-12 px-1",4,"ngIf"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade","custom-modal"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","id","modalClose","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger"],[1,"custom-heading"],[1,"col-12","px-1"],[3,"options"],[1,"modal-body"],[1,"custom-list",3,"edit"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),e.YNc(4,p,2,0,"span",4),e.YNc(5,i,2,0,"span",4),e.qZA(),e.TgZ(6,"button",5),e.NdJ("click",function(){return o.showEmployeesListFn()}),e._uU(7," Employee List "),e.qZA()()(),e.TgZ(8,"div",6),e.YNc(9,l,2,1,"div",7),e.qZA()(),e.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e._uU(15,"Employee List"),e.qZA(),e._UZ(16,"button",13),e.qZA(),e.YNc(17,m,2,0,"div",14),e.TgZ(18,"div",15)(19,"button",16),e._uU(20,"Close"),e.qZA()()()()()),2&t&&(e.xp6(4),e.Q6J("ngIf",o.EmployeeEditID),e.xp6(1),e.Q6J("ngIf",!o.EmployeeEditID),e.xp6(4),e.Q6J("ngIf",o.showForm),e.xp6(8),e.Q6J("ngIf",o.showEmployeesList))},dependencies:[n.ez,n.O5,u.l,r.C,_.Z]}),a})()}}]);