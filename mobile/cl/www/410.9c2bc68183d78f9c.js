"use strict";(self.webpackChunkcnl=self.webpackChunkcnl||[]).push([[410],{4410:(g,u,s)=>{s.r(u),s.d(u,{ChartOfAccountsComponent:()=>A});var t=s(5879),i=s(6814),r=s(3929),d=s(7871),p=s(2787);let m=(()=>{class n{refreshTable(){this.taTableComponent?.refresh()}constructor(e){this.router=e,this.edit=new t.vpe,this.tableConfig={apiUrl:"finance/chart_of_accounts/",showCheckbox:!0,pkId:"account_id",pageSize:10,globalSearch:{keys:["created_at","account_code","account_name","account_type","parent_account_id","bank_account_id"]},defaultSort:{key:"created_at",value:"descend"},cols:[{fieldKey:"account_code",name:"Account Code",sort:!0},{fieldKey:"account_name",name:"Account Name",sort:!0},{fieldKey:"account_type",name:"Account Type",sort:!0},{fieldKey:"parent_account_id",name:"Parent Account",sort:!0,displayType:"map",mapFn:(o,a,l)=>`${a.parent_account.account_name}`},{fieldKey:"bank_account_id",name:"Bank Account",sort:!0,displayType:"map",mapFn:(o,a,l)=>`${a.bank_account.bank_name}`},{fieldKey:"code",name:"Action",type:"action",actions:[{type:"delete",label:"Delete",apiUrl:"finance/chart_of_accounts",confirm:!0,confirmMsg:"Sure to delete?"},{type:"callBackFn",icon:"fa fa-pen",label:"",callBackFn:(o,a)=>{console.log(o),this.edit.emit(o.account_id)}}]}]}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-chart-of-accounts-list"]],viewQuery:function(e,o){if(1&e&&t.Gf(d.Z,5),2&e){let a;t.iGM(a=t.CRH())&&(o.taTableComponent=a.first)}},outputs:{edit:"edit"},standalone:!0,features:[t.jDz],decls:1,vars:1,consts:[[3,"options"]],template:function(e,o){1&e&&t._UZ(0,"ta-table",0),2&e&&t.Q6J("options",o.tableConfig)},dependencies:[i.ez,r.l,d.Z]}),n})();var f=s(9862),h=s(7127);function C(n,c){1&n&&(t.TgZ(0,"span",17),t._uU(1,"Update Chart Accounts"),t.qZA())}function b(n,c){1&n&&(t.TgZ(0,"span",17),t._uU(1,"Create Chart Accounts"),t.qZA())}function _(n,c){if(1&n&&(t.TgZ(0,"div",18),t._UZ(1,"ta-form",19),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("options",e.formConfig)}}function y(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",20)(1,"app-chart-of-accounts-list",21),t.NdJ("edit",function(a){t.CHM(e);const l=t.oxw();return t.KtG(l.editChartOfAccounts(a))}),t.qZA()()}}let A=(()=>{class n{constructor(e){this.http=e,this.showChartOfAccountsList=!1,this.showForm=!1,this.formConfig={}}ngOnInit(){this.showChartOfAccountsList=!1,this.showForm=!0,this.ChartOfAccountsEditID=null,this.setFormConfig(),console.log("this.formConfig",this.formConfig)}hide(){document.getElementById("modalClose").click()}editChartOfAccounts(e){console.log("event",e),this.ChartOfAccountsEditID=e,this.http.get("finance/chart_of_accounts/"+e).subscribe(o=>{o&&(this.formConfig.model=o,this.formConfig.showActionBtn=!0,this.formConfig.pkId="account_id",this.formConfig.submit.label="Update",this.showForm=!0)}),this.hide()}showChartOfAccountsListFn(){this.showChartOfAccountsList=!0,this.ChartOfAccountsListComponent?.refreshTable()}setFormConfig(){this.ChartOfAccountsEditID=null,this.formConfig={url:"finance/chart_of_accounts/",formState:{viewMode:!1},showActionBtn:!0,exParams:[{key:"parent_account_id",type:"script",value:"data.parent_account.account_id"},{key:"bank_account_id",type:"script",value:"data.bank_account.bank_account_id"}],submit:{label:"Submit",submittedFn:()=>this.ngOnInit()},reset:{resetFn:()=>{this.ngOnInit()}},model:{},fields:[{fieldGroupClassName:"ant-row custom-form-block px-0 mx-0",fieldGroup:[{key:"account_code",type:"input",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Account Code",placeholder:"Enter Account Code",required:!0}},{key:"account_name",type:"input",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Account Name",placeholder:"Enter Account Name",required:!0}},{key:"account_type",type:"select",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Account Type",placeholder:"Select Account Type",required:!0,options:[{value:"Asset",label:"Asset"},{value:"Liability",label:"Liability"},{value:"Equity",label:"Equity"},{value:"Revenue",label:"Revenue"},{value:"Expense",label:"Expense"}]}},{key:"parent_account",type:"select",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Parent Account",dataKey:"parent_account_id",dataLabel:"account_name",options:[],lazy:{url:"finance/chart_of_accounts/",lazyOneTime:!0},required:!1},hooks:{onInit:e=>{}}},{key:"bank_account",type:"select",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Bank Account",dataKey:"bank_account_id",dataLabel:"bank_name",options:[],lazy:{url:"finance/bank_accounts/",lazyOneTime:!0},required:!1},hooks:{onInit:e=>{}}},{key:"is_active",type:"checkbox",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Is Active",required:!1}}]}]}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.eN))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-chart-of-accounts"]],viewQuery:function(e,o){if(1&e&&t.Gf(m,5),2&e){let a;t.iGM(a=t.CRH())&&(o.ChartOfAccountsListComponent=a.first)}},standalone:!0,features:[t.jDz],decls:21,vars:4,consts:[[1,"container-fluid","p-3"],[1,"bank-account-banner"],[1,"col-12","px-0",2,"display","flex","justify-content","space-between","align-items","center","flex-wrap","wrap"],["type","button",1,"btn","pl-0",2,"color","black",3,"click"],["class","custom-heading",4,"ngIf"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-primary",3,"click"],[1,"row","custom-form"],["class","col-12 px-1",4,"ngIf"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade","custom-modal"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","id","modalClose","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger"],[1,"custom-heading"],[1,"col-12","px-1"],[3,"options"],[1,"modal-body"],[1,"custom-list",3,"edit"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),t.NdJ("click",function(){return o.ChartOfAccountsEditID=null}),t.YNc(4,C,2,0,"span",4),t.YNc(5,b,2,0,"span",4),t.qZA(),t.TgZ(6,"button",5),t.NdJ("click",function(){return o.showChartOfAccountsListFn()}),t._uU(7," Chart List "),t.qZA()()(),t.TgZ(8,"div",6),t.YNc(9,_,2,1,"div",7),t.qZA()(),t.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),t._uU(15,"Edit Chart Of Accounts List"),t.qZA(),t._UZ(16,"button",13),t.qZA(),t.YNc(17,y,2,0,"div",14),t.TgZ(18,"div",15)(19,"button",16),t._uU(20,"Close"),t.qZA()()()()()),2&e&&(t.xp6(4),t.Q6J("ngIf",o.ChartOfAccountsEditID),t.xp6(1),t.Q6J("ngIf",!o.ChartOfAccountsEditID),t.xp6(4),t.Q6J("ngIf",o.showForm),t.xp6(8),t.Q6J("ngIf",o.showChartOfAccountsList))},dependencies:[i.ez,i.O5,r.l,h.C,m]}),n})()}}]);