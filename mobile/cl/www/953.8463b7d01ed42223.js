"use strict";(self.webpackChunkcnl=self.webpackChunkcnl||[]).push([[953,817],{1134:(h,u,a)=>{a.d(u,{e:()=>f});var i=a(5879),l=a(5581);let f=(()=>{class e{constructor(){this.curdConfig={drawerSize:500,drawerPlacement:"top",tableConfig:{apiUrl:"leads/interaction_types/",title:"Interaction type",pkId:"interaction_type_id",pageSize:10,globalSearch:{keys:["interaction_type_id","interaction_type"]},defaultSort:{key:"created_at",value:"descend"},cols:[{fieldKey:"interaction_type",name:"Interaction type",sort:!0},{fieldKey:"code",name:"Action",type:"action",actions:[{type:"delete",label:"Delete",confirm:!0,confirmMsg:"Sure to delete?",apiUrl:"leads/interaction_types"},{type:"edit",label:"Edit"}]}]},formConfig:{url:"leads/interaction_types/",title:"Interaction type",pkId:"interaction_type_id",exParams:[],fields:[{fieldGroupClassName:"row col-12 p-0 m-0 custom-form field-no-bottom-space",fieldGroup:[{key:"interaction_type",type:"input",className:"col-md-6 col-12 p-0",templateOptions:{label:"Interaction type",placeholder:"Enter Interaction type",required:!0}}]}]}}}}return e.\u0275fac=function(d){return new(d||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-interaction-types"]],decls:4,vars:1,consts:[[1,"container-fluid","pt-3"],[1,"row"],[1,"col-12","p-0"],[1,"custom-list",3,"options"]],template:function(d,m){1&d&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2),i._UZ(3,"ta-curd-modal",3),i.qZA()()()),2&d&&(i.xp6(3),i.Q6J("options",m.curdConfig))},dependencies:[l.h]}),e})()},2886:(h,u,a)=>{a.d(u,{i:()=>f});var i=a(5879),l=a(5581);let f=(()=>{class e{constructor(){this.curdConfig={drawerSize:500,drawerPlacement:"top",tableConfig:{apiUrl:"leads/lead_statuses/",title:"Lead statuses",pkId:"lead_status_id",pageSize:10,globalSearch:{keys:["lead_status_id","status_name"]},defaultSort:{key:"created_at",value:"descend"},cols:[{fieldKey:"status_name",name:"Status Name",sort:!0},{fieldKey:"code",name:"Action",type:"action",actions:[{type:"delete",label:"Delete",confirm:!0,confirmMsg:"Sure to delete?",apiUrl:"leads/lead_statuses"},{type:"edit",label:"Edit"}]}]},formConfig:{url:"leads/lead_statuses/",title:"Lead status",pkId:"lead_status_id",exParams:[],fields:[{fieldGroupClassName:"row col-12 p-0 m-0 custom-form field-no-bottom-space",fieldGroup:[{key:"status_name",type:"input",className:"col-md-6 col-12 px-0",templateOptions:{label:"Status Name",placeholder:"Enter Status Name",required:!0}}]}]}}}}return e.\u0275fac=function(d){return new(d||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-lead-statuses"]],decls:4,vars:1,consts:[[1,"container-fluid","pt-3"],[1,"row"],[1,"col-12","p-0"],[1,"custom-list",3,"options"]],template:function(d,m){1&d&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2),i._UZ(3,"ta-curd-modal",3),i.qZA()()()),2&d&&(i.xp6(3),i.Q6J("options",m.curdConfig))},dependencies:[l.h]}),e})()},1602:(h,u,a)=>{a.d(u,{H:()=>d});var i=a(6814),l=a(5879),f=a(3929),e=a(7871),_=a(2787);let d=(()=>{class m{refreshTable(){this.taTableComponent?.refresh()}constructor(c){this.router=c,this.edit=new l.vpe,this.tableConfig={apiUrl:"leads/leads/",showCheckbox:!0,pkId:"lead_id",pageSize:10,globalSearch:{keys:["interaction_date","name","email","phone","lead_status","score","assignee","notes"]},defaultSort:{key:"created_at",value:"descend"},cols:[{fieldKey:"name",name:"Name",sort:!0},{fieldKey:"email",name:"Email",sort:!0},{fieldKey:"phone",name:"Phone",sort:!0},{fieldKey:"lead_status",name:"Lead Status",displayType:"map",mapFn:(p,s,n)=>`${s.lead_status.status_name}`,sort:!0},{fieldKey:"score",name:"Score",sort:!0},{fieldKey:"assignee",name:"Assigned",sort:!0,displayType:"map",mapFn:(p,s,n)=>`${s.assignee?.first_name||""} ${s.assignee?.last_name||""}`.trim()},{fieldKey:"interaction_date",name:"Interaction Date",displayType:"map",mapFn:(p,s,n)=>{const t=s.interaction[0].interaction_date,[o,r]=t.split("T");return`${o}<br>${r}`},sort:!1},{fieldKey:"notes",name:"Notes",displayType:"map",mapFn:(p,s,n)=>(console.log("row",s),`${s.interaction[0].notes}`),sort:!1},{fieldKey:"code",name:"Action",type:"action",actions:[{type:"delete",label:"Delete",confirm:!0,confirmMsg:"Sure to delete?",apiUrl:"leads/leads"},{type:"callBackFn",icon:"fa fa-pen",label:"",callBackFn:(p,s)=>{this.edit.emit(p.lead_id)}}]}]}}}return m.\u0275fac=function(c){return new(c||m)(l.Y36(_.F0))},m.\u0275cmp=l.Xpm({type:m,selectors:[["app-leads-list"]],viewQuery:function(c,p){if(1&c&&l.Gf(e.Z,5),2&c){let s;l.iGM(s=l.CRH())&&(p.taTableComponent=s.first)}},outputs:{edit:"edit"},standalone:!0,features:[l.jDz],decls:1,vars:1,consts:[[1,"custom-list",3,"options"]],template:function(c,p){1&c&&l._UZ(0,"ta-table",0),2&c&&l.Q6J("options",p.tableConfig)},dependencies:[i.ez,f.l,e.Z]}),m})()},7817:(h,u,a)=>{a.r(u),a.d(u,{LeadsComponent:()=>p});var i=a(6814),l=a(3929),f=a(1602),e=a(5879),_=a(9862),d=a(7127);function m(s,n){1&s&&(e.TgZ(0,"span",17),e._uU(1,"Update Leads"),e.qZA())}function y(s,n){1&s&&(e.TgZ(0,"span",17),e._uU(1,"Create Leads"),e.qZA())}function c(s,n){if(1&s){const t=e.EpF();e.TgZ(0,"div",18)(1,"app-leads-list",19),e.NdJ("edit",function(r){e.CHM(t);const C=e.oxw();return e.KtG(C.editLeads(r))}),e.qZA()()}}let p=(()=>{class s{set_default_status_id(){return this.http.get("leads/lead_statuses/").subscribe(t=>{if(t&&t.data){const o="status_name",r="Open",g=t.data.filter(L=>L[o]===r)[0].lead_status_id;this.formConfig.model.lead.lead_status_id=g}})}constructor(t){this.http=t,this.showLeadsList=!1,this.showForm=!1,this.formConfig={}}ngOnInit(){this.showLeadsList=!1,this.showForm=!1,this.LeadsEditID=null,this.setFormConfig(),this.set_default_status_id(),this.formConfig.fields[0].fieldGroup[5].hide=!0,this.formConfig.fields[1].hide=!0}hide(){document.getElementById("modalClose").click()}editLeads(t){this.LeadsEditID=t,this.http.get("leads/leads/"+t).subscribe(o=>{o&&o.data&&(this.formConfig.model=o.data,this.formConfig.showActionBtn=!0,this.formConfig.pkId="lead_id",this.formConfig.submit.label="Update",this.formConfig.model.lead_id=this.LeadsEditID,this.showForm=!0,this.formConfig.fields[0].fieldGroup[5].hide=!1,this.formConfig.fields[1].hide=!1)}),this.hide()}showLeadsListFn(){this.showLeadsList=!0,this.leadsListComponent?.refreshTable()}setFormConfig(){this.LeadsEditID=null,this.formConfig={url:"leads/leads/",formState:{viewMode:!1},showActionBtn:!0,exParams:[],submit:{label:"Submit",submittedFn:()=>this.ngOnInit()},reset:{resetFn:()=>{this.ngOnInit()}},model:{lead:{},interaction:{}},fields:[{fieldGroupClassName:"ant-row custom-form-block px-0 mx-0",key:"lead",fieldGroup:[{key:"name",type:"input",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Name",placeholder:"Enter Name",required:!0},hooks:{onInit:t=>{}}},{key:"email",type:"input",className:"col-md-4 col-sm-6 col-12",templateOptions:{type:"input",label:"Email",placeholder:"Enter Email",required:!0},hooks:{onInit:t=>{}}},{key:"phone",type:"input",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Phone",placeholder:"Enter Number",required:!0}},{key:"score",type:"input",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Score",placeholder:"Enter Score"}},{key:"assignee",type:"select",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Assigned",dataKey:"employee_id",dataLabel:"first_name",options:[],required:!0,lazy:{url:"hrms/employees/",lazyOneTime:!0}},hooks:{onChanges:t=>{t.formControl.valueChanges.subscribe(o=>{this.formConfig&&this.formConfig.model&&this.formConfig.model.lead?this.formConfig.model.lead.assignee_id=o.employee_id:console.error("Form config or lead_status data model is not defined.")})}}},{key:"lead_status",type:"select",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Lead Status",dataKey:"lead_status_id",dataLabel:"status_name",options:[],lazy:{url:"leads/lead_statuses/",lazyOneTime:!0}},hooks:{onChanges:t=>{t.formControl.valueChanges.subscribe(o=>{this.formConfig&&this.formConfig.model&&this.formConfig.model.lead?this.formConfig.model.lead.lead_status_id=o.lead_status_id:console.error("Form config or lead_status data model is not defined.")})}}}]},{key:"interaction",type:"table",className:"custom-form-list",templateOptions:{title:"Lead Interactions",addText:"Add Interaction Notes",tableCols:[{name:"interaction_type_id",label:"Interaction Type"},{name:"interaction_date",label:"Interaction Date"},{name:"notes",label:"Notes"}]},fieldArray:{fieldGroup:[{key:"interaction_type",type:"select",templateOptions:{label:"Interaction Type",dataKey:"interaction_type_id",dataLabel:"interaction_type",options:[],hideLabel:!0,required:!0,lazy:{url:"leads/interaction_types/",lazyOneTime:!0}},hooks:{onChanges:t=>{t.formControl.valueChanges.subscribe(o=>{console.log("user",o);const r=t.parent.key;this.formConfig.model.interaction[r]||(console.error(`Task comments at index ${r} is not defined. Initializing...`),this.formConfig.model.interaction[r]={}),this.formConfig.model.interaction[r].interaction_type_id=o.interaction_type_id})}}},{key:"interaction_date",type:"date",templateOptions:{label:"Interaction Date",hideLabel:!0,required:!0}},{key:"notes",type:"text",templateOptions:{label:"Notes",placeholder:"Enter Notes",hideLabel:!0,required:!0}}]}}]}}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(_.eN))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-leads"]],viewQuery:function(t,o){if(1&t&&e.Gf(f.H,5),2&t){let r;e.iGM(r=e.CRH())&&(o.leadsListComponent=r.first)}},standalone:!0,features:[e.jDz],decls:22,vars:4,consts:[[1,"container-fluid","p-3"],[1,"leads-banner"],[1,"col-12","px-0",2,"display","flex","justify-content","space-between","align-items","center","flex-wrap","wrap"],["type","button",1,"btn","pl-0",2,"color","black",3,"click"],["class","custom-heading",4,"ngIf"],["type","button","data-bs-toggle","modal","data-bs-target","#leadsListModal",1,"btn","btn-primary",3,"click"],[1,"row","custom-form"],[3,"options"],["id","leadsListModal","tabindex","-1","aria-labelledby","leadsListModalLabel","aria-hidden","true",1,"modal","fade","custom-modal"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header"],["id","leadsListModalLabel",1,"modal-title"],["type","button","id","modalClose","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger"],[1,"custom-heading"],[1,"modal-body"],[1,"custom-list",3,"edit"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),e.NdJ("click",function(){return o.LeadsEditID=null}),e.YNc(4,m,2,0,"span",4),e.YNc(5,y,2,0,"span",4),e.qZA(),e.TgZ(6,"button",5),e.NdJ("click",function(){return o.showLeadsListFn()}),e._uU(7," Leads List "),e.qZA()()(),e.TgZ(8,"div",6)(9,"div"),e._UZ(10,"ta-form",7),e.qZA()()(),e.TgZ(11,"div",8)(12,"div",9)(13,"div",10)(14,"div",11)(15,"h5",12),e._uU(16,"Edit Leads List"),e.qZA(),e._UZ(17,"button",13),e.qZA(),e.YNc(18,c,2,0,"div",14),e.TgZ(19,"div",15)(20,"button",16),e._uU(21,"Close"),e.qZA()()()()()),2&t&&(e.xp6(4),e.Q6J("ngIf",o.LeadsEditID),e.xp6(1),e.Q6J("ngIf",!o.LeadsEditID),e.xp6(5),e.Q6J("options",o.formConfig),e.xp6(8),e.Q6J("ngIf",o.showLeadsList))},dependencies:[i.ez,i.O5,l.l,d.C,f.H]}),s})()},6953:(h,u,a)=>{a.r(u),a.d(u,{LeadsModule:()=>s});var i=a(6814),l=a(2787),f=a(7817),e=a(2886),_=a(1134),d=a(5879);const m=[{path:"",component:f.LeadsComponent},{path:"lead_statuses",component:e.i},{path:"interaction_types",component:_.e}];let y=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[l.Bz.forChild(m),l.Bz]}),n})();var c=a(3929),p=a(1602);let s=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[i.ez,c.l,y,p.H]}),n})()}}]);