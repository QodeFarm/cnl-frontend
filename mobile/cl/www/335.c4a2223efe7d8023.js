"use strict";(self.webpackChunkcnl=self.webpackChunkcnl||[]).push([[335],{6433:(y,p,a)=>{a.d(p,{k:()=>g});var n=a(5879),f=a(6814),u=a(3929),t=a(7871),h=a(2787);let g=(()=>{class d{refreshTable(){this.taTableComponent?.refresh()}constructor(r){this.router=r,this.baseUrl="http://195.35.20.172:8000/api/v1/",this.edit=new n.vpe,this.tableConfig={apiUrl:this.baseUrl+"assets/assets/",showCheckbox:!0,pkId:"asset_id",pageSize:10,globalSearch:{keys:["purchase_date","name","price","asset_category_id","unit_options_id","location_id","asset_status_id"]},defaultSort:{key:"created_at",value:"descend"},cols:[{fieldKey:"name",name:"Name",sort:!0},{fieldKey:"price",name:"Price",sort:!0},{fieldKey:"asset_category_id",name:"Category",sort:!0,displayType:"map",mapFn:(l,i,o)=>`${i.asset_category.category_name}`},{fieldKey:"unit_options_id",name:"Unit Options",sort:!0,displayType:"map",mapFn:(l,i,o)=>`${i.unit_options.unit_name}`},{fieldKey:"purchase_date",name:"Purchase Date",sort:!0,displayType:"date"},{fieldKey:"location_id",name:"Location",sort:!0,displayType:"map",mapFn:(l,i,o)=>`${i.location.location_name}`},{fieldKey:"asset_status_id",name:"Status",sort:!0,displayType:"map",mapFn:(l,i,o)=>`${i.asset_status.status_name}`},{fieldKey:"code",name:"Action",type:"action",actions:[{type:"delete",label:"Delete",apiUrl:this.baseUrl+"assets/assets"},{type:"callBackFn",icon:"fa fa-pen",label:"",callBackFn:(l,i)=>{console.log(l),this.edit.emit(l.asset_id)}}]}]}}}return d.\u0275fac=function(r){return new(r||d)(n.Y36(h.F0))},d.\u0275cmp=n.Xpm({type:d,selectors:[["app-assets-list"]],viewQuery:function(r,l){if(1&r&&n.Gf(t.Z,5),2&r){let i;n.iGM(i=n.CRH())&&(l.taTableComponent=i.first)}},outputs:{edit:"edit"},standalone:!0,features:[n.jDz],decls:1,vars:1,consts:[[1,"custom-list",3,"options"]],template:function(r,l){1&r&&n._UZ(0,"ta-table",0),2&r&&n.Q6J("options",l.tableConfig)},dependencies:[f.ez,u.l,t.Z]}),d})()},9335:(y,p,a)=>{a.r(p),a.d(p,{AssetsComponent:()=>i});var n=a(6814),f=a(3929),u=a(6433),t=a(5879),h=a(9862),g=a(7127);function d(o,m){1&o&&(t.TgZ(0,"span",17),t._uU(1,"Update Assets"),t.qZA())}function _(o,m){1&o&&(t.TgZ(0,"span",17),t._uU(1,"Create Assets"),t.qZA())}function r(o,m){if(1&o&&(t.TgZ(0,"div",18),t._UZ(1,"ta-form",19),t.qZA()),2&o){const s=t.oxw();t.xp6(1),t.Q6J("options",s.formConfig)}}function l(o,m){if(1&o){const s=t.EpF();t.TgZ(0,"div",20)(1,"app-assets-list",21),t.NdJ("edit",function(c){t.CHM(s);const C=t.oxw();return t.KtG(C.editAssets(c))}),t.qZA()()}}let i=(()=>{class o{constructor(s){this.http=s,this.baseUrl="http://195.35.20.172:8000/api/v1/",this.showAssetsList=!1,this.showForm=!1,this.formConfig={}}ngOnInit(){this.showAssetsList=!1,this.showForm=!0,this.AssetsEditID=null,this.setFormConfig(),console.log("this.formConfig",this.formConfig)}hide(){document.getElementById("modalClose").click()}editAssets(s){console.log("event",s),this.AssetsEditID=s,this.http.get(this.baseUrl+"assets/assets/"+s).subscribe(e=>{e&&(this.formConfig.model=e,this.formConfig.showActionBtn=!0,this.formConfig.pkId="asset_id",this.formConfig.submit.label="Update",this.formConfig.model.asset_id=this.AssetsEditID,this.showForm=!0)}),this.hide()}showAssetsListFn(){this.showAssetsList=!0,this.AssetsListComponent?.refreshTable()}setFormConfig(){this.AssetsEditID=null,this.formConfig={url:this.baseUrl+"assets/assets/",formState:{viewMode:!1},showActionBtn:!0,exParams:[{key:"asset_category_id",type:"script",value:"data.asset_category.asset_category_id"},{key:"asset_status_id",type:"script",value:"data.asset_status.asset_status_id"},{key:"location_id",type:"script",value:"data.location.location_id"},{key:"unit_options_id",type:"script",value:"data.unit_options.unit_options_id"}],submit:{label:"Submit",submittedFn:()=>this.ngOnInit()},reset:{resetFn:()=>{this.ngOnInit()}},model:{},fields:[{fieldGroupClassName:"ant-row custom-form-block px-0 mx-0",fieldGroup:[{className:"col-md-4 col-sm-6 col-12",key:"name",type:"input",templateOptions:{label:"Name",placeholder:"Enter Name",required:!0}},{key:"purchase_date",type:"input",className:"col-md-4 col-sm-6 col-12",templateOptions:{type:"date",label:"Purchase date",placeholder:"Select Purchase date",required:!1}},{key:"price",type:"input",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Price",required:!1,placeholder:"Enter Price"},hooks:{onInit:s=>{}}},{key:"asset_category",type:"select",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Asset Category",dataKey:"asset_category_id",dataLabel:"category_name",options:[],lazy:{url:this.baseUrl+"assets/asset_categories/",lazyOneTime:!0},required:!0},hooks:{onInit:s=>{s.formControl.valueChanges.subscribe(e=>{this.formConfig&&this.formConfig.model&&this.formConfig.model.asset_category_id?this.formConfig.model.asset_category_id=e.asset_category_id:console.error("Form config or asset category data model is not defined.")})}}},{key:"asset_status",type:"select",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Asset Status",dataKey:"asset_status_id",dataLabel:"status_name",options:[],lazy:{url:this.baseUrl+"assets/asset_statuses/",lazyOneTime:!0},required:!0},hooks:{onInit:s=>{s.formControl.valueChanges.subscribe(e=>{this.formConfig&&this.formConfig.model&&this.formConfig.model.asset_status_id?this.formConfig.model.asset_status_id=e.asset_status_id:console.error("Form config or asset status data model is not defined.")})}}},{key:"unit_options",type:"select",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Unit Options",dataKey:"unit_options_id",dataLabel:"unit_name",options:[],lazy:{url:"masters/unit_options/",lazyOneTime:!0},required:!0},hooks:{onInit:s=>{s.formControl.valueChanges.subscribe(e=>{this.formConfig&&this.formConfig.model&&this.formConfig.model.unit_options_id?this.formConfig.model.unit_options_id=e.unit_options_id:console.error("Form config or unit options data model is not defined.")})}}},{key:"location",type:"select",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Location",dataKey:"location_id",dataLabel:"location_name",options:[],lazy:{url:this.baseUrl+"assets/locations/",lazyOneTime:!0},required:!0},hooks:{onInit:s=>{s.formControl.valueChanges.subscribe(e=>{this.formConfig&&this.formConfig.model&&this.formConfig.model.location_id?this.formConfig.model.location_id=e.location_id:console.error("Form config or location data model is not defined.")})}}}]}]}}}return o.\u0275fac=function(s){return new(s||o)(t.Y36(h.eN))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-assets"]],viewQuery:function(s,e){if(1&s&&t.Gf(u.k,5),2&s){let c;t.iGM(c=t.CRH())&&(e.AssetsListComponent=c.first)}},standalone:!0,features:[t.jDz],decls:21,vars:4,consts:[[1,"container-fluid","p-3"],[1,"assets-banner"],[1,"col-12","px-0",2,"display","flex","justify-content","space-between","align-items","center"],["type","button",1,"btn","pl-0",2,"color","black",3,"click"],["class","custom-heading",4,"ngIf"],["type","button","data-bs-toggle","modal","data-bs-target","#assetsListModal",1,"btn","btn-primary",3,"click"],[1,"row","custom-form"],["class","col-12 px-1",4,"ngIf"],["id","assetsListModal","tabindex","-1","aria-labelledby","assetsListModalLabel","aria-hidden","true",1,"modal","fade","custom-modal"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header"],["id","assetsListModalLabel",1,"modal-title"],["type","button","id","modalClose","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger"],[1,"custom-heading"],[1,"col-12","px-1"],[3,"options"],[1,"modal-body"],[1,"custom-list",3,"edit"]],template:function(s,e){1&s&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),t.NdJ("click",function(){return e.AssetsEditID=null}),t.YNc(4,d,2,0,"span",4),t.YNc(5,_,2,0,"span",4),t.qZA(),t.TgZ(6,"button",5),t.NdJ("click",function(){return e.showAssetsListFn()}),t._uU(7," Assets List "),t.qZA()()(),t.TgZ(8,"div",6),t.YNc(9,r,2,1,"div",7),t.qZA()(),t.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),t._uU(15,"Edit Assets List"),t.qZA(),t._UZ(16,"button",13),t.qZA(),t.YNc(17,l,2,0,"div",14),t.TgZ(18,"div",15)(19,"button",16),t._uU(20,"Close"),t.qZA()()()()()),2&s&&(t.xp6(4),t.Q6J("ngIf",e.AssetsEditID),t.xp6(1),t.Q6J("ngIf",!e.AssetsEditID),t.xp6(4),t.Q6J("ngIf",e.showForm),t.xp6(8),t.Q6J("ngIf",e.showAssetsList))},dependencies:[n.ez,n.O5,f.l,g.C,u.k]}),o})()}}]);