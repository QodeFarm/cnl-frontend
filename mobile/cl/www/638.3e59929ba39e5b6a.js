"use strict";(self.webpackChunkcnl=self.webpackChunkcnl||[]).push([[638],{3638:(w,l,a)=>{a.r(l),a.d(l,{ChangePasswordComponent:()=>u});var g=a(6814),p=a(3929),s=a(5879),c=a(9862),t=a(6223);function m(n,d){if(1&n&&(s.TgZ(0,"div",19),s._uU(1),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.hij(" ",e.successMessage," ")}}function h(n,d){if(1&n&&(s.TgZ(0,"div",20),s._uU(1),s.qZA()),2&n){const e=s.oxw();s.xp6(1),s.hij(" ",e.errorMessage," ")}}let u=(()=>{class n{constructor(e){this.http=e,this.formData={old_password:"",password:"",confirm_password:""},this.showOldPassword=!1,this.showNewPassword=!1,this.showConfirmPassword=!1,this.successMessage=null,this.errorMessage=null}onSubmit(){if(this.successMessage=null,this.errorMessage=null,this.formData.password!==this.formData.confirm_password)return this.errorMessage="Password and Confirm Password do not match.",void this.autoHideMessage();this.changePassword(this.formData).subscribe(e=>{this.successMessage="Password changed successfully!",this.errorMessage=null,this.resetForm(),this.autoHideMessage()},e=>{this.errorMessage=e.error?.errors?this.formatErrorMessage(e.error.errors):"An error occurred while changing the password.",this.successMessage=null,this.autoHideMessage()})}autoHideMessage(){setTimeout(()=>{this.successMessage=null,this.errorMessage=null},5e3)}changePassword(e){return this.http.post("users/change_password/",e)}formatErrorMessage(e){const o=[];for(const r in e)e[r]&&o.push(`${r}: ${e[r].join(", ")}`);return o.join(". ")}resetForm(){this.formData={old_password:"",password:"",confirm_password:""}}toggleVisibility(e){"old"===e?this.showOldPassword=!this.showOldPassword:"new"===e?this.showNewPassword=!this.showNewPassword:"confirm"===e&&(this.showConfirmPassword=!this.showConfirmPassword)}}return n.\u0275fac=function(e){return new(e||n)(s.Y36(c.eN))},n.\u0275cmp=s.Xpm({type:n,selectors:[["app-change-password"]],standalone:!0,features:[s.jDz],decls:31,vars:15,consts:[[1,"container-fluid","pt-3"],[1,"col-12","px-0",2,"display","flex","justify-content","space-between","align-items","center"],["type","button",1,"btn","pl-0",2,"color","black"],[1,"custom-heading"],[1,"row-custom-form"],[1,"col-md-6","col-lg-3","mx-auto"],[3,"ngSubmit"],["form","ngForm"],[1,"form-group","position-relative"],["for","old_password"],["id","old_password","name","old_password","required","","placeholder","Enter Old Password",1,"form-control",3,"type","ngModel","ngModelChange"],["type","button",1,"btn","eye-btn",3,"click"],["for","password"],["id","password","name","password","required","","placeholder","Enter New Password",1,"form-control",3,"type","ngModel","ngModelChange"],["for","confirm_password"],["id","confirm_password","name","confirm_password","required","","placeholder","Confirm New Password",1,"form-control",3,"type","ngModel","ngModelChange"],["class","alert alert-success",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"alert","alert-success"],[1,"alert","alert-danger"]],template:function(e,o){if(1&e&&(s.TgZ(0,"div",0)(1,"div",1)(2,"button",2)(3,"span",3),s._uU(4,"Change Password"),s.qZA()()(),s.TgZ(5,"div",4)(6,"div",5)(7,"form",6,7),s.NdJ("ngSubmit",function(){return o.onSubmit()}),s.TgZ(9,"div",8)(10,"label",9),s._uU(11,"Old Password"),s.qZA(),s.TgZ(12,"input",10),s.NdJ("ngModelChange",function(i){return o.formData.old_password=i}),s.qZA(),s.TgZ(13,"div",11),s.NdJ("click",function(){return o.toggleVisibility("old")}),s._UZ(14,"i"),s.qZA()(),s.TgZ(15,"div",8)(16,"label",12),s._uU(17,"New Password"),s.qZA(),s.TgZ(18,"input",13),s.NdJ("ngModelChange",function(i){return o.formData.password=i}),s.qZA(),s.TgZ(19,"div",11),s.NdJ("click",function(){return o.toggleVisibility("new")}),s._UZ(20,"i"),s.qZA()(),s.TgZ(21,"div",8)(22,"label",14),s._uU(23,"Confirm New Password"),s.qZA(),s.TgZ(24,"input",15),s.NdJ("ngModelChange",function(i){return o.formData.confirm_password=i}),s.qZA(),s.TgZ(25,"div",11),s.NdJ("click",function(){return o.toggleVisibility("confirm")}),s._UZ(26,"i"),s.qZA()(),s.YNc(27,m,2,1,"div",16),s.YNc(28,h,2,1,"div",17),s.TgZ(29,"button",18),s._uU(30," Change Password "),s.qZA()()()()()),2&e){const r=s.MAs(8);s.xp6(12),s.Q6J("type",o.showOldPassword?"text":"password")("ngModel",o.formData.old_password),s.xp6(2),s.Tol(o.showOldPassword?"fa fa-eye-slash":"fa fa-eye"),s.xp6(4),s.Q6J("type",o.showNewPassword?"text":"password")("ngModel",o.formData.password),s.xp6(2),s.Tol(o.showNewPassword?"fa fa-eye-slash":"fa fa-eye"),s.xp6(4),s.Q6J("type",o.showConfirmPassword?"text":"password")("ngModel",o.formData.confirm_password),s.xp6(2),s.Tol(o.showConfirmPassword?"fa fa-eye-slash":"fa fa-eye"),s.xp6(1),s.Q6J("ngIf",o.successMessage),s.xp6(1),s.Q6J("ngIf",o.errorMessage),s.xp6(1),s.Q6J("disabled",r.invalid)}},dependencies:[g.ez,g.O5,p.l,t._Y,t.Fj,t.JJ,t.JL,t.Q7,t.On,t.F],styles:[".row-custom-form[_ngcontent-%COMP%]{background-color:#f9f9f999;padding:20px 10px 6px;border-radius:8px;margin:5px}.position-relative[_ngcontent-%COMP%]{position:relative}input.form-control[_ngcontent-%COMP%]{padding-right:2.5rem;height:40px}.eye-btn[_ngcontent-%COMP%]{position:absolute;top:70%;right:10px;transform:translateY(-50%);background:none;border:none;cursor:pointer;color:#6c757d;padding:0;display:flex;align-items:center;justify-content:center;height:auto;width:2rem;z-index:10}.eye-btn[_ngcontent-%COMP%]:hover{color:#000}"]}),n})()}}]);