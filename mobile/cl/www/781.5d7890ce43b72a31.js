"use strict";(self.webpackChunkcnl=self.webpackChunkcnl||[]).push([[781],{3781:(L,u,r)=>{r.r(u),r.d(u,{LoginModule:()=>I});var p=r(6814),l=r(2787),i=r(1495),e=r(5879),s=r(3076),c=r(7127);const d=function(){return["/forgot-password"]},U=function(){return["/"]},k=[{path:"login",component:(()=>{class t{constructor(o,n){this.router=o,this.userService=n,this.options={url:"users/login/",submit:{label:"Login",icon:"user",successMsg:"Login Successfully",submittedFn:m=>{this.formSubmiiterd(m)}},fields:[{key:"username",type:"input",className:"form-group",templateOptions:{hideLabel:!0,addonLeftIcon:"user",addonLeft:{class:"user"},addonRight:{text:"$"},label:"Username",placeholder:"Enter Username",required:!0}},{key:"password",type:"input",className:"form-group",templateOptions:{hideLabel:!0,addonLeftIcon:"lock",label:"Password",type:"password",placeholder:"Enter Password",required:!0}}]},this.formConfig={url:"employees/employees/",title:"User",pkId:"employee_id",exParams:[],fields:[{fieldGroupClassName:"row",fieldGroup:[{key:"first_name",type:"input",className:"ta-cell pr-md col-12 mat-input",templateOptions:{label:"First Name",placeholder:"User id / Email",required:!0,hideLabel:!0}},{key:"last_name",type:"input",className:"ta-cell pr-md col-12 mat-input",templateOptions:{label:"Last Name",placeholder:"Password",hideLabel:!0,required:!0}}]}],submit:{submittedFn:m=>{}}}}formSubmiiterd(o){console.log("LoginComponent: formSubmiiterd called, response:",o);const n=o.data[0],m=n.user_id,h=n.username,f=n.first_name,v=n.last_name;console.log("LoginComponent: Extracted userId:",m),console.log("LoginComponent: Extracted username:",h),console.log("LoginComponent: Extracted firstName:",f),console.log("LoginComponent: Extracted lastName:",v),this.userService.setUserDetails(m,h,f,v),localStorage.setItem("accessToken",n.access_token),localStorage.setItem("refreshToken",n.refresh_token),localStorage.setItem("accessToken",o.data[0].access_token),i.Ur.setItem("user",o.data[0]),console.log("LoginComponent: Access token stored:",n.access_token),console.log("LoginComponent: Refresh token stored:",n.refresh_token),console.log("response: Access token stored:",o.data[0].access_token),console.log("response: user",o.data[0]),this.router.navigateByUrl("/admin")}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(l.F0),e.Y36(s.K))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-login"]],decls:19,vars:3,consts:[[1,"login-page"],[1,"container-fluid","p-0","h-100"],[1,"row","m-0","login-block","justify-content-center","h-100"],[1,"login-left-block","h-100"],["src","assets/img/login-logo.png"],[1,"login-right-block","h-100"],[1,"row","m-0"],[1,"col-lg-12"],[1,"p-2","login-form"],[1,"logo-design-block","mb-4"],[1,""],[1,"login-form-block"],[3,"options"],[1,"text-center"],["routerLinkActive","router-link-active",1,"signup-link","m-2",3,"routerLink"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"img",4),e.qZA(),e.TgZ(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"h1",10),e._uU(11,"C&L"),e.qZA(),e.TgZ(12,"span"),e._uU(13,"Accounts Book"),e.qZA()(),e.TgZ(14,"div",11),e._UZ(15,"ta-form",12),e.TgZ(16,"div",13)(17,"a",14),e._uU(18,"Forgot Password"),e.qZA()()()()()()()()()()),2&o&&(e.xp6(15),e.Q6J("options",n.options),e.xp6(2),e.Q6J("routerLink",e.DdM(2,d)))},dependencies:[l.rH,l.Od,c.C],styles:[".creative-shape[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%;height:auto;z-index:-1}.creative-shape[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:auto}"]}),t})()},{path:"forgot-password",component:(()=>{class t{constructor(o){this.router=o,this.options={url:"users/reset_password_email/",reset:{cssClass:"d-none"},submit:{label:"Submit",icon:"user",successMsg:"Password Reset Link Send. Please Check Your Email",submittedFn:n=>{this.formSubmiiterd(n)}},fields:[{key:"email",type:"input",className:"pb-3",templateOptions:{type:"email",hideLabel:!0,addonLeftIcon:"user",addonLeft:{class:"user"},addonRight:{text:"$"},label:"Email",placeholder:"Enter Email",required:!0}}]}}ngOnInit(){}formSubmiiterd(o){this.router.navigateByUrl("/login")}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(l.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-forgot-password"]],decls:21,vars:3,consts:[[1,"login-page"],[1,"container-fluid","p-0","h-100"],[1,"row","m-0","login-block","justify-content-center","h-100"],[1,"login-left-block","h-100"],["src","assets/img/login-logo.png"],[1,"login-right-block","h-100"],[1,"row","m-0"],[1,"col-lg-12","p-0"],[1,"login-form"],[1,"logo-design-block","mb-4"],[1,""],[1,"login-form-block"],[1,"mb-4",2,"color","#fff"],[3,"options"],[1,"text-center","mt-2"],[1,"signup-link",3,"routerLink"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"img",4),e.qZA(),e.TgZ(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"h1",10),e._uU(11,"C&L"),e.qZA(),e.TgZ(12,"span"),e._uU(13,"Accounts Book"),e.qZA()(),e.TgZ(14,"div",11)(15,"h3",12),e._uU(16,"Forgot Password"),e.qZA(),e._UZ(17,"ta-form",13),e.TgZ(18,"div",14)(19,"a",15),e._uU(20,"Login"),e.qZA()()()()()()()()()()),2&o&&(e.xp6(17),e.Q6J("options",n.options),e.xp6(2),e.Q6J("routerLink",e.DdM(2,U)))},dependencies:[l.rH,c.C],styles:[".creative-shape[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%;height:auto;z-index:-1}.creative-shape[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:auto}.login-form-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;font-size:24px}@media (max-width: 767px){.login-form-block[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px}}"]}),t})()}];let b=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[l.Bz.forChild(k),l.Bz]}),t})();var C=r(3929);let I=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[p.ez,b,C.l]}),t})()},3076:(L,u,r)=>{r.d(u,{K:()=>l});var p=r(5879);let l=(()=>{class i{constructor(){this.userId=null,this.username=null,this.firstName=null,this.lastName=null}setUserDetails(s,c,d,g){this.userId=s,this.username=c,this.firstName=d,this.lastName=g,localStorage.setItem("userId",s),localStorage.setItem("username",c),localStorage.setItem("firstName",d),localStorage.setItem("lastName",g),console.log("UserService: setUserDetails called"),console.log("User ID:",this.userId),console.log("Username:",this.username),console.log("First Name:",this.firstName),console.log("Last Name:",this.lastName)}getUserId(){const s=this.userId||localStorage.getItem("userId");return console.log("UserService: getUserId called, returning:",s),s}getUsername(){const s=this.username||localStorage.getItem("username");return console.log("UserService: getUsername called, returning:",s),s}getFirstName(){const s=this.firstName||localStorage.getItem("firstName");return console.log("UserService: getFirstName called, returning:",s),s}getLastName(){const s=this.lastName||localStorage.getItem("lastName");return console.log("UserService: getLastName called, returning:",s),s}clearUserDetails(){console.log("UserService: clearUserDetails called"),this.userId=null,this.username=null,this.firstName=null,this.lastName=null,localStorage.removeItem("userId"),localStorage.removeItem("username"),localStorage.removeItem("firstName"),localStorage.removeItem("lastName")}}return i.\u0275fac=function(s){return new(s||i)},i.\u0275prov=p.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()}}]);