"use strict";(self.webpackChunkcnl=self.webpackChunkcnl||[]).push([[910],{7910:(g,m,a)=>{a.r(m),a.d(m,{ExpenseClaimComponent:()=>E});var s=a(6814),p=a(3929),e=a(5879),c=a(7871),u=a(2787);let d=(()=>{class n{refreshTable(){this.taTableComponent?.refresh()}constructor(t){this.router=t,this.edit=new e.vpe,this.tableConfig={apiUrl:"finance/expense_claims/",showCheckbox:!0,pkId:"expense_claim_id",pageSize:10,globalSearch:{keys:["created_at","employee_id","claim_date","description","total_amount","status"]},defaultSort:{key:"created_at",value:"descend"},cols:[{fieldKey:"employee_id",name:"Employee",sort:!0,displayType:"map",mapFn:(l,o,r)=>`${o.employee.first_name} ${o.employee?.second_name||""}`},{fieldKey:"claim_date",name:"Claim Date",sort:!0},{fieldKey:"description",name:"Description",sort:!0},{fieldKey:"total_amount",name:"Total Amount",sort:!0},{fieldKey:"status",name:"Status",sort:!0},{fieldKey:"code",name:"Action",type:"action",actions:[{type:"delete",label:"Delete",apiUrl:"finance/expense_claims",confirm:!0,confirmMsg:"Sure to delete?"},{type:"callBackFn",icon:"fa fa-pen",label:"",callBackFn:(l,o)=>{console.log(l),this.edit.emit(l.expense_claim_id)}}]}]}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-expense-claim-list"]],viewQuery:function(t,l){if(1&t&&e.Gf(c.Z,5),2&t){let o;e.iGM(o=e.CRH())&&(l.taTableComponent=o.first)}},outputs:{edit:"edit"},standalone:!0,features:[e.jDz],decls:1,vars:1,consts:[[3,"options"]],template:function(t,l){1&t&&e._UZ(0,"ta-table",0),2&t&&e.Q6J("options",l.tableConfig)},dependencies:[s.ez,p.l,c.Z]}),n})();var f=a(9862),C=a(7127);function x(n,i){1&n&&(e.TgZ(0,"span",17),e._uU(1,"Update Expense Claim"),e.qZA())}function h(n,i){1&n&&(e.TgZ(0,"span",17),e._uU(1,"Create Expense Claim"),e.qZA())}function y(n,i){if(1&n&&(e.TgZ(0,"div",18),e._UZ(1,"ta-form",19),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("options",t.formConfig)}}function b(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",20)(1,"app-expense-claim-list",21),e.NdJ("edit",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.editExpenseClaim(o))}),e.qZA()()}}let E=(()=>{class n{constructor(t){this.http=t,this.showExpenseClaimList=!1,this.showForm=!1,this.formConfig={}}ngOnInit(){this.showExpenseClaimList=!1,this.showForm=!0,this.ExpenseClaimEditID=null,this.setFormConfig(),console.log("this.formConfig",this.formConfig)}hide(){document.getElementById("modalClose").click()}editExpenseClaim(t){console.log("event",t),this.ExpenseClaimEditID=t,this.http.get("finance/expense_claims/"+t).subscribe(l=>{l&&(this.formConfig.model=l,this.formConfig.showActionBtn=!0,this.formConfig.pkId="expense_claim_id",this.formConfig.submit.label="Update",this.showForm=!0)}),this.hide()}showExpenseClaimListFn(){this.showExpenseClaimList=!0,this.ExpenseClaimListComponent?.refreshTable()}setFormConfig(){this.ExpenseClaimEditID=null,this.formConfig={url:"finance/expense_claims/",formState:{viewMode:!1},showActionBtn:!0,exParams:[{key:"employee_id",type:"script",value:"data.employee.employee_id"}],submit:{label:"Submit",submittedFn:()=>this.ngOnInit()},reset:{resetFn:()=>{this.ngOnInit()}},model:{},fields:[{fieldGroupClassName:"ant-row custom-form-block px-0 mx-0",fieldGroup:[{key:"employee",type:"select",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Employee",dataKey:"employee",dataLabel:"first_name",options:[],lazy:{url:"hrms/employees/",lazyOneTime:!0},required:!1},hooks:{onInit:t=>{}}},{key:"claim_date",type:"date",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Claim Date",placeholder:"Select Claim Date",required:!0}},{key:"description",type:"textarea",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Description",placeholder:"Enter Description",required:!1}},{key:"total_amount",type:"input",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Total Amount",placeholder:"Enter Total Amount",required:!0}},{key:"status",type:"select",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Status",placeholder:"Status",required:!1,options:[{value:"Pending",label:"Pending"},{value:"Approved",label:"Approved"},{value:"Rejected",label:"Rejected"}]}}]}]}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(f.eN))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-expense-claim"]],viewQuery:function(t,l){if(1&t&&e.Gf(d,5),2&t){let o;e.iGM(o=e.CRH())&&(l.ExpenseClaimListComponent=o.first)}},standalone:!0,features:[e.jDz],decls:21,vars:4,consts:[[1,"container-fluid","p-3"],[1,"bank-account-banner"],[1,"col-12","px-0",2,"display","flex","justify-content","space-between","align-items","center","flex-wrap","wrap"],["type","button",1,"btn","pl-0",2,"color","black",3,"click"],["class","custom-heading",4,"ngIf"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-primary",3,"click"],[1,"row","custom-form"],["class","col-12 px-1",4,"ngIf"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade","custom-modal"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","id","modalClose","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger"],[1,"custom-heading"],[1,"col-12","px-1"],[3,"options"],[1,"modal-body"],[1,"custom-list",3,"edit"]],template:function(t,l){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),e.NdJ("click",function(){return l.ExpenseClaimEditID=null}),e.YNc(4,x,2,0,"span",4),e.YNc(5,h,2,0,"span",4),e.qZA(),e.TgZ(6,"button",5),e.NdJ("click",function(){return l.showExpenseClaimListFn()}),e._uU(7," Expense List "),e.qZA()()(),e.TgZ(8,"div",6),e.YNc(9,y,2,1,"div",7),e.qZA()(),e.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e._uU(15,"Edit Expense Claim List"),e.qZA(),e._UZ(16,"button",13),e.qZA(),e.YNc(17,b,2,0,"div",14),e.TgZ(18,"div",15)(19,"button",16),e._uU(20,"Close"),e.qZA()()()()()),2&t&&(e.xp6(4),e.Q6J("ngIf",l.ExpenseClaimEditID),e.xp6(1),e.Q6J("ngIf",!l.ExpenseClaimEditID),e.xp6(4),e.Q6J("ngIf",l.showForm),e.xp6(8),e.Q6J("ngIf",l.showExpenseClaimList))},dependencies:[s.ez,s.O5,p.l,C.C,d]}),n})()}}]);