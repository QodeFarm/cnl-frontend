"use strict";(self.webpackChunkcnl=self.webpackChunkcnl||[]).push([[592],{8162:(O,g,a)=>{a.r(g),a.d(g,{EmployeeAttendanceComponent:()=>C});var i=a(6814),t=a(3929),c=a(5879),e=a(5581);let C=(()=>{class y{constructor(){this.curdConfig={drawerSize:500,drawerPlacement:"top",tableConfig:{apiUrl:"hrms/employee_attendance/",title:"Employee Attendance",pkId:"employee_attendance_id",pageSize:10,globalSearch:{keys:["employee","attendance_date","absent","leave_duration"]},defaultSort:{key:"created_at",value:"descend"},cols:[{fieldKey:"employee",name:"Employee",sort:!0,displayType:"map",mapFn:(u,m,s)=>`${m.employee?.first_name||""} ${m.employee?.last_name||""}`.trim()},{fieldKey:"attendance_date",name:"Attendance Date",sort:!0},{fieldKey:"absent",name:"Absent",sort:!1,displayType:"map",mapFn:()=>"Yes"},{fieldKey:"leave_duration",name:"Leave Duration",sort:!0},{fieldKey:"code",name:"Action",type:"action",actions:[{type:"delete",label:"Delete",confirm:!0,confirmMsg:"Sure to delete?",apiUrl:"hrms/employee_attendance"},{type:"edit",label:"Edit"}]}]},formConfig:{url:"hrms/employee_attendance/",title:"Employee Attendance",pkId:"employee_attendance_id",exParams:[{key:"employee_id",type:"script",value:"data.employee.employee_id"},{key:"absent",value:!0}],fields:[{fieldGroupClassName:"row col-12 p-0 m-0 custom-form field-no-bottom-space",fieldGroup:[{key:"employee",type:"select",className:"col-6 pb-3 ps-0",templateOptions:{label:"Employee",dataKey:"employee_id",dataLabel:"first_name",options:[],lazy:{url:"hrms/employees/",lazyOneTime:!0},required:!0}},{key:"attendance_date",type:"date",className:"col-6 pb-3 ps-0",templateOptions:{label:"Attendance Date",placeholder:"Select date",required:!0}},{key:"leave_duration",type:"select",className:"col-6 pb-3 ps-0",templateOptions:{label:"Leave Duration",required:!1,options:[{value:"First Half",label:"First Half"},{value:"Full Day",label:"Full Day"},{value:"Second Half",label:"Second Half"}]}}]}]}}}}return y.\u0275fac=function(u){return new(u||y)},y.\u0275cmp=c.Xpm({type:y,selectors:[["app-employee-attendance"]],standalone:!0,features:[c.jDz],decls:4,vars:1,consts:[[1,"container-fluid","pt-3"],[1,"row"],[1,"col-12","p-0"],[1,"custom-list",3,"options"]],template:function(u,m){1&u&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2),c._UZ(3,"ta-curd-modal",3),c.qZA()()()),2&u&&(c.xp6(3),c.Q6J("options",m.curdConfig))},dependencies:[i.ez,t.l,e.h]}),y})()},9594:(O,g,a)=>{a.r(g),a.d(g,{EmployeeLeaveBalanceComponent:()=>y});var i=a(6814),t=a(3929),c=a(5879),e=a(9862),C=a(5581);let y=(()=>{class _{constructor(m){this.http=m,this.curdConfig={drawerSize:500,drawerPlacement:"right",hideAddBtn:!0,tableConfig:{apiUrl:"hrms/employee_leave_balance/",title:"Employee Leave Balance",pkId:"balance_id",pageSize:10,globalSearch:{keys:["employee","leave_type","leave_balance","year"]},defaultSort:{key:"created_at",value:"descend"},cols:[{fieldKey:"employee",name:"Employee",sort:!0,displayType:"map",mapFn:(s,r,l)=>`${r.employee?.first_name||""} ${r.employee?.last_name||""}`.trim()},{fieldKey:"leave_type",name:"Leave Type",sort:!0,displayType:"map",mapFn:(s,r,l)=>`${r.leave_type.leave_type_name}`},{fieldKey:"leave_balance",name:"Leave Balance",sort:!0},{fieldKey:"year",name:"Year",sort:!0}]},formConfig:{url:"hrms/employee_leave_balance/",title:"Employee Leave Balance",pkId:"balance_id",exParams:[{key:"employee_id",type:"script",value:"data.employee.employee_id"},{key:"leave_type_id",type:"script",value:"data.leave_type.leave_type_id"}],fields:[]}}}}return _.\u0275fac=function(m){return new(m||_)(c.Y36(e.eN))},_.\u0275cmp=c.Xpm({type:_,selectors:[["app-employee-leave-balance"]],standalone:!0,features:[c.jDz],decls:4,vars:1,consts:[[1,"container-fluid","pt-3"],[1,"row"],[1,"col-12","p-0"],[1,"custom-list",3,"options"]],template:function(m,s){1&m&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2),c._UZ(3,"ta-curd-modal",3),c.qZA()()()),2&m&&(c.xp6(3),c.Q6J("options",s.curdConfig))},dependencies:[i.ez,t.l,C.h]}),_})()},6539:(O,g,a)=>{a.d(g,{L:()=>y});var i=a(5879),t=a(6814),c=a(3929),e=a(7871),C=a(2787);let y=(()=>{class _{refreshTable(){this.taTableComponent?.refresh()}constructor(m){this.router=m,this.edit=new i.vpe,this.tableConfig={apiUrl:"hrms/employee_leaves/",showCheckbox:!0,pkId:"leave_id",pageSize:10,globalSearch:{keys:["employee","start_date","end_date","comments","leave_type"]},defaultSort:{key:"created_at",value:"descend"},cols:[{fieldKey:"employee",name:"Employee",sort:!0,displayType:"map",mapFn:(s,r,l)=>`${r.employee?.first_name||""} ${r.employee?.last_name||""}`.trim()},{fieldKey:"leave_type",name:"Leave Type",sort:!0,displayType:"map",mapFn:(s,r,l)=>`${r.leave_type.leave_type_name}`},{fieldKey:"start_date",name:"Start Date",sort:!0},{fieldKey:"end_date",name:"End Date",sort:!0},{fieldKey:"comments",name:"Comments",sort:!0},{fieldKey:"code",name:"Action",type:"action",actions:[{type:"delete",label:"Delete",apiUrl:"hrms/employee_leaves",confirm:!0,confirmMsg:"Sure to delete?"},{type:"callBackFn",icon:"fa fa-pen",label:"",callBackFn:(s,r)=>{console.log(s),this.edit.emit(s.leave_id)}}]}]}}}return _.\u0275fac=function(m){return new(m||_)(i.Y36(C.F0))},_.\u0275cmp=i.Xpm({type:_,selectors:[["app-employee-leaves-list"]],viewQuery:function(m,s){if(1&m&&i.Gf(e.Z,5),2&m){let r;i.iGM(r=i.CRH())&&(s.taTableComponent=r.first)}},outputs:{edit:"edit"},standalone:!0,features:[i.jDz],decls:1,vars:1,consts:[[1,"custom-list",3,"options"]],template:function(m,s){1&m&&i._UZ(0,"ta-table",0),2&m&&i.Q6J("options",s.tableConfig)},dependencies:[t.ez,c.l,e.Z]}),_})()},4081:(O,g,a)=>{a.r(g),a.d(g,{EmployeeLeavesComponent:()=>r});var i=a(6814),t=a(3929),c=a(6539),e=a(5879),C=a(9862),y=a(7127);function _(l,p){1&l&&(e.TgZ(0,"span",17),e._uU(1,"Update Leaves"),e.qZA())}function u(l,p){1&l&&(e.TgZ(0,"span",17),e._uU(1,"Create Leaves"),e.qZA())}function m(l,p){if(1&l&&(e.TgZ(0,"div",18),e._UZ(1,"ta-form",19),e.qZA()),2&l){const o=e.oxw();e.xp6(1),e.Q6J("options",o.formConfig)}}function s(l,p){if(1&l){const o=e.EpF();e.TgZ(0,"div",20)(1,"app-employee-leaves-list",21),e.NdJ("edit",function(h){e.CHM(o);const T=e.oxw();return e.KtG(T.editEmployeeLeaves(h))}),e.qZA()()}}let r=(()=>{class l{constructor(o){this.http=o,this.showEmployeeLeavesList=!1,this.showForm=!1,this.formConfig={}}ngOnInit(){this.showEmployeeLeavesList=!1,this.showForm=!0,this.EmployeeLeavesEditID=null,this.setFormConfig(),console.log("this.formConfig",this.formConfig)}hide(){document.getElementById("modalClose").click()}editEmployeeLeaves(o){console.log("event",o),this.EmployeeLeavesEditID=o,this.http.get("hrms/employee_leaves/"+o).subscribe(n=>{n&&(this.formConfig.model={employee_leaves:n.data.employee_leaves,leave_approvals:n.data.leave_approvals||{}},this.formConfig.model=n.data,this.formConfig.showActionBtn=!0,this.formConfig.pkId="leave_id",this.formConfig.submit.label="Update",this.formConfig.model.leave_id=this.EmployeeLeavesEditID,this.showForm=!0)}),this.hide()}showEmployeeLeavesListFn(){this.showEmployeeLeavesList=!0,this.EmployeeLeavesListComponent?.refreshTable()}setFormConfig(){this.EmployeeLeavesEditID=null,this.formConfig={url:"hrms/employee_leaves/",formState:{viewMode:!1},showActionBtn:!0,exParams:[],submit:{label:"Submit",submittedFn:()=>this.ngOnInit()},reset:{resetFn:()=>{this.ngOnInit()}},model:{employee_leaves:{}},fields:[{fieldGroupClassName:"ant-row custom-form-block px-0 mx-0",key:"employee_leaves",fieldGroup:[{key:"employee",type:"select",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Employee",dataKey:"employee_id",dataLabel:"first_name",options:[],lazy:{url:"hrms/employees/",lazyOneTime:!0},required:!0},hooks:{onChanges:o=>{o.formControl.valueChanges.subscribe(n=>{this.formConfig&&this.formConfig.model&&this.formConfig.model.employee_leaves?this.formConfig.model.employee_leaves.employee_id=n.employee_id:console.error("Form config or employee data model is not defined.")})}}},{key:"leave_type",type:"select",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Leave Type",dataKey:"leave_type_id",dataLabel:"leave_type_name",options:[],lazy:{url:"hrms/leave_types/",lazyOneTime:!0},required:!0},hooks:{onChanges:o=>{o.formControl.valueChanges.subscribe(n=>{this.formConfig&&this.formConfig.model&&this.formConfig.model.employee_leaves?this.formConfig.model.employee_leaves.leave_type_id=n.leave_type_id:console.error("Form config or leave_type data model is not defined.")})}}},{key:"start_date",type:"input",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Start Date",type:"date",placeholder:"Select Start Date",required:!0}},{key:"end_date",type:"input",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"End Date",type:"date",placeholder:"Select End Date",required:!0}},{key:"comments",type:"textarea",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Comments",placeholder:"Enter Comments",required:!1}}]}]}}}return l.\u0275fac=function(o){return new(o||l)(e.Y36(C.eN))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-employee-leaves"]],viewQuery:function(o,n){if(1&o&&e.Gf(c.L,5),2&o){let h;e.iGM(h=e.CRH())&&(n.EmployeeLeavesListComponent=h.first)}},standalone:!0,features:[e.jDz],decls:21,vars:4,consts:[[1,"container-fluid","p-3"],[1,"employee-leaves-banner"],[1,"col-12","px-0",2,"display","flex","justify-content","space-between","align-items","center","flex-wrap","wrap"],["type","button",1,"btn","pl-0"],["class","custom-heading",4,"ngIf"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-primary",3,"click"],[1,"row","custom-form"],["class","col-12 px-1",4,"ngIf"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade","custom-modal"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","id","modalClose","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger"],[1,"custom-heading"],[1,"col-12","px-1"],[3,"options"],[1,"modal-body"],[1,"custom-list",3,"edit"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),e.YNc(4,_,2,0,"span",4),e.YNc(5,u,2,0,"span",4),e.qZA(),e.TgZ(6,"button",5),e.NdJ("click",function(){return n.showEmployeeLeavesListFn()}),e._uU(7," Leaves List "),e.qZA()()(),e.TgZ(8,"div",6),e.YNc(9,m,2,1,"div",7),e.qZA()(),e.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e._uU(15,"Employee Leaves List"),e.qZA(),e._UZ(16,"button",13),e.qZA(),e.YNc(17,s,2,0,"div",14),e.TgZ(18,"div",15)(19,"button",16),e._uU(20,"Close"),e.qZA()()()()()),2&o&&(e.xp6(4),e.Q6J("ngIf",n.EmployeeLeavesEditID),e.xp6(1),e.Q6J("ngIf",!n.EmployeeLeavesEditID),e.xp6(4),e.Q6J("ngIf",n.showForm),e.xp6(8),e.Q6J("ngIf",n.showEmployeeLeavesList))},dependencies:[i.ez,i.O5,t.l,y.C,c.L]}),l})()},4670:(O,g,a)=>{a.d(g,{j:()=>y});var i=a(5879),t=a(6814),c=a(3929),e=a(7871),C=a(2787);let y=(()=>{class _{refreshTable(){this.taTableComponent?.refresh()}constructor(m){this.router=m,this.edit=new i.vpe,this.tableConfig={apiUrl:"hrms/employee_salary/",showCheckbox:!0,pkId:"salary_id",pageSize:10,globalSearch:{keys:["salary_start_date","salary_end_date","salary_amount","salary_currency","employee_id"]},defaultSort:{key:"created_at",value:"descend"},cols:[{fieldKey:"salary_start_date",name:"Salary Start Date",sort:!0},{fieldKey:"salary_end_date",name:"Salary End Date",sort:!0},{fieldKey:"salary_amount",name:"Salary Amount",sort:!0},{fieldKey:"salary_currency",name:"Salary Currency",sort:!0},{fieldKey:"employee_id",name:"Employee",sort:!0,displayType:"map",mapFn:(s,r,l)=>`${r.employee?.first_name||""} ${r.employee?.last_name||""}`.trim()},{fieldKey:"code",name:"Action",type:"action",actions:[{type:"delete",label:"Delete",apiUrl:"hrms/employee_salary",confirm:!0,confirmMsg:"Sure to delete?"},{type:"callBackFn",icon:"fa fa-pen",label:"",callBackFn:(s,r)=>{console.log(s),this.edit.emit(s.salary_id)}}]}]}}}return _.\u0275fac=function(m){return new(m||_)(i.Y36(C.F0))},_.\u0275cmp=i.Xpm({type:_,selectors:[["app-employee-salary-list"]],viewQuery:function(m,s){if(1&m&&i.Gf(e.Z,5),2&m){let r;i.iGM(r=i.CRH())&&(s.taTableComponent=r.first)}},outputs:{edit:"edit"},standalone:!0,features:[i.jDz],decls:1,vars:1,consts:[[1,"custom-list",3,"options"]],template:function(m,s){1&m&&i._UZ(0,"ta-table",0),2&m&&i.Q6J("options",s.tableConfig)},dependencies:[t.ez,c.l,e.Z]}),_})()},6680:(O,g,a)=>{a.r(g),a.d(g,{EmployeeSalaryComponent:()=>r});var i=a(6814),t=a(3929),c=a(4670),e=a(5879),C=a(9862),y=a(7127);function _(l,p){1&l&&(e.TgZ(0,"span",17),e._uU(1,"Update Salary"),e.qZA())}function u(l,p){1&l&&(e.TgZ(0,"span",17),e._uU(1,"Create Salary"),e.qZA())}function m(l,p){if(1&l&&(e.TgZ(0,"div",18),e._UZ(1,"ta-form",19),e.qZA()),2&l){const o=e.oxw();e.xp6(1),e.Q6J("options",o.formConfig)}}function s(l,p){if(1&l){const o=e.EpF();e.TgZ(0,"div",20)(1,"app-employee-salary-list",21),e.NdJ("edit",function(h){e.CHM(o);const T=e.oxw();return e.KtG(T.editEmployeeSalary(h))}),e.qZA()()}}let r=(()=>{class l{constructor(o){this.http=o,this.showEmployeeSalaryList=!1,this.showForm=!1,this.formConfig={}}ngOnInit(){this.showEmployeeSalaryList=!1,this.showForm=!0,this.EmployeeSalaryEditID=null,this.setFormConfig(),console.log("this.formConfig",this.formConfig)}hide(){document.getElementById("modalClose").click()}editEmployeeSalary(o){console.log("event",o),this.EmployeeSalaryEditID=o,this.http.get("hrms/employee_salary/"+o).subscribe(n=>{n&&(this.formConfig.model=n,this.formConfig.showActionBtn=!0,this.formConfig.pkId="salary_id",this.formConfig.submit.label="Update",this.showForm=!0)}),this.hide()}showEmployeeSalaryListFn(){this.showEmployeeSalaryList=!0,this.EmployeeSalaryListComponent?.refreshTable()}setFormConfig(){this.EmployeeSalaryEditID=null,this.formConfig={url:"hrms/employee_salary/",formState:{viewMode:!1},showActionBtn:!0,exParams:[{key:"employee_id",type:"script",value:"data.employee.employee_id"}],submit:{label:"Submit",submittedFn:()=>this.ngOnInit()},reset:{resetFn:()=>{this.ngOnInit()}},model:{},fields:[{fieldGroupClassName:"ant-row custom-form-block px-0 mx-0",fieldGroup:[{key:"salary_amount",type:"input",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Salary Amount",placeholder:"Enter Salary Amount",type:"number",required:!0}},{key:"salary_currency",type:"textarea",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Salary Currency",placeholder:"Enter Salary Currency",required:!0}},{key:"salary_start_date",type:"input",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Salary Start Date",type:"date",placeholder:"Select Salary Start Date and Time",required:!0}},{key:"salary_end_date",type:"input",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Salary End Date",type:"date",placeholder:"Select Salary End Date and Time",required:!0}},{key:"employee",type:"select",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Employee",dataKey:"employee_id",dataLabel:"first_name",options:[],lazy:{url:"hrms/employees/",lazyOneTime:!0},required:!1},hooks:{onInit:o=>{}}}]}]}}}return l.\u0275fac=function(o){return new(o||l)(e.Y36(C.eN))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-employee-salary"]],viewQuery:function(o,n){if(1&o&&e.Gf(c.j,5),2&o){let h;e.iGM(h=e.CRH())&&(n.EmployeeSalaryListComponent=h.first)}},standalone:!0,features:[e.jDz],decls:21,vars:4,consts:[[1,"container-fluid","p-3"],[1,"employee-salary-banner"],[1,"col-12","px-0",2,"display","flex","justify-content","space-between","align-items","center","flex-wrap","wrap"],["type","button",1,"btn","pl-0"],["class","custom-heading",4,"ngIf"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-primary",3,"click"],[1,"row","custom-form"],["class","col-12 px-1",4,"ngIf"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade","custom-modal"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","id","modalClose","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger"],[1,"custom-heading"],[1,"col-12","px-1"],[3,"options"],[1,"modal-body"],[1,"custom-list",3,"edit"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),e.YNc(4,_,2,0,"span",4),e.YNc(5,u,2,0,"span",4),e.qZA(),e.TgZ(6,"button",5),e.NdJ("click",function(){return n.showEmployeeSalaryListFn()}),e._uU(7," Salary List "),e.qZA()()(),e.TgZ(8,"div",6),e.YNc(9,m,2,1,"div",7),e.qZA()(),e.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e._uU(15,"Employee Salary List"),e.qZA(),e._UZ(16,"button",13),e.qZA(),e.YNc(17,s,2,0,"div",14),e.TgZ(18,"div",15)(19,"button",16),e._uU(20,"Close"),e.qZA()()()()()),2&o&&(e.xp6(4),e.Q6J("ngIf",n.EmployeeSalaryEditID),e.xp6(1),e.Q6J("ngIf",!n.EmployeeSalaryEditID),e.xp6(4),e.Q6J("ngIf",n.showForm),e.xp6(8),e.Q6J("ngIf",n.showEmployeeSalaryList))},dependencies:[i.ez,i.O5,t.l,y.C,c.j]}),l})()},1609:(O,g,a)=>{a.r(g),a.d(g,{LeaveApprovalsComponent:()=>_});var i=a(6814),t=a(5879),c=a(3929),e=a(9862),C=a(5581);function y(u,m){if(1&u){const s=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){t.CHM(s);const l=t.oxw();return t.KtG(l.bulkApproval())}),t._uU(1),t.qZA()}if(2&u){const s=t.oxw();t.xp6(1),t.hij("Bulk Approval (",null==s.curdConfig||null==s.curdConfig.tableConfig||null==s.curdConfig.tableConfig.checkedRows?null:s.curdConfig.tableConfig.checkedRows.length,")")}}let _=(()=>{class u{constructor(s){this.http=s,this.edit=new t.vpe,this.circle=new t.vpe,this.curdConfig={drawerSize:500,drawerPlacement:"right",hideAddBtn:!0,tableConfig:{apiUrl:"hrms/leave_approvals/",title:"Leave Approvals",pkId:"approval_id",pageSize:10,showCheckbox:!0,globalSearch:{keys:["approval_id","leave_id","name","status_id","approval_date"]},defaultSort:{key:"created_at",value:"descend"},cols:[{fieldKey:"leave_id",name:"Employee",sort:!0,displayType:"map",mapFn:(r,l,p)=>`${l.leave.employee?.first_name||""} ${l.leave.employee?.last_name||""}`.trim()},{fieldKey:"leave_id",name:"Leave Type",sort:!0,displayType:"map",mapFn:(r,l,p)=>`${l.leave.leave_type.leave_type_name}`},{fieldKey:"leave_id",name:"Start Date",sort:!0,displayType:"map",mapFn:(r,l,p)=>`${l.leave.start_date}`},{fieldKey:"leave_id",name:"End Date",sort:!0,displayType:"map",mapFn:(r,l,p)=>`${l.leave.end_date}`},{fieldKey:"status_name",name:"Status",sort:!0,displayType:"map",mapFn:(r,l,p)=>`${l.status.status_name}`},{fieldKey:"approval_date",name:"Approval Date",sort:!0},{fieldKey:"approver",name:"Approver",sort:!0,displayType:"map",mapFn:(r,l,p)=>`${l.approver?.first_name||""} ${l.approver?.last_name||""}`.trim()},{fieldKey:"code",name:"Action",type:"action",actions:[{type:"callBackFn",icon:"fa fa-check-circle text-success",confirm:!0,confirmMsg:"Sure to Approve?",callBackFn:(r,l)=>{console.log(r),this.circleLeaveApprovals(r.approval_id),this.circle.emit(r.approval_id)}},{type:"callBackFn",icon:"fa fa-times-circle text-danger",confirm:!0,confirmMsg:"Are you sure to Reject?",callBackFn:(r,l)=>{console.log(r),this.circleLeaveRejections(r.approval_id),this.circle.emit(r.approval_id)}}]}]},formConfig:{url:"hrms/leave_approvals/",title:"Leave Approvals",pkId:"approval_id",exParams:[{key:"status_id",type:"script",value:"data.status.status_id"},{key:"leave_id",type:"script",value:"data.leave.leave_id"},{key:"approver_id",type:"script",value:"data.approver.manager_id"}],fields:[]}}}circleLeaveApprovals(s){const r=`hrms/leave_approvals/${s}/`,l="Approved";this.http.get("masters/statuses/").subscribe(o=>{if(o&&Array.isArray(o.data)){const n=o.data.find(h=>h.status_name.toLowerCase()===l.toLowerCase());n&&n.status_id?this.updateLeaveApproval(r,n.status_id):(console.error(`Error: Status "${l}" not found.`),alert(`Status "${l}" not found.`))}else console.error("Invalid response format from statuses API:",o),alert("Failed to fetch statuses. Please try again.")},o=>{console.error("Error fetching statuses:",o),alert("Failed to fetch statuses. Please try again.")})}updateLeaveApproval(s,r){const l=new Date,p=l.getFullYear()+"-"+String(l.getMonth()+1).padStart(2,"0")+"-"+String(l.getDate()).padStart(2,"0");this.http.patch(s,{status_id:r,approval_date:p}).subscribe(n=>{if(n&&n.data&&n.data.leave_id){const h=n.data.leave,A=n.data.leave_days;this.http.get(`hrms/employee_leave_balance/?employee_id=${h.employee.employee_id}&leave_type_id=${h.leave_type.leave_type_id}`).subscribe(D=>{if(D&&D.data&&D.data.length>0){const M=D.data[0],f=M.balance_id,b=M.leave_balance;if(void 0===b)return void console.error("Error: leave_balance field is undefined in the response.");const d=parseFloat(b);if(isNaN(d))return void console.error("Error: Invalid leave_balance value.");this.http.patch(`hrms/employee_leave_balance/${f}/`,{leave_balance:b-A}).subscribe(()=>{this.curdConfig.tableConfig.reload()},x=>{console.error("Error saving leave balance:",x),alert("Failed to update leave balance.")})}else console.error("No leave balance found for employee or leave type."),alert("No leave balance found for this employee and leave type.")},D=>{console.error("Error fetching leave balance:",D),alert("Failed to fetch leave balance.")})}else console.error("Error: Leave data not found in response:",n)},n=>{console.error("HTTP error:",n),alert("An error occurred while updating the leave status.")})}circleLeaveRejections(s){const r=`hrms/leave_approvals/${s}/`,l="Rejected";this.http.get("masters/statuses/").subscribe(o=>{if(o&&Array.isArray(o.data)){const n=o.data.find(h=>h.status_name.toLowerCase()===l.toLowerCase());n&&n.status_id?this.updateLeaveRejection(r,n.status_id):(console.error(`Error: Status "${l}" not found.`),alert(`Status "${l}" not found.`))}else console.error("Invalid response format from statuses API:",o),alert("Failed to fetch statuses. Please try again.")},o=>{console.error("Error fetching statuses:",o),alert("Failed to fetch statuses. Please try again.")})}updateLeaveRejection(s,r){const l=new Date,p=l.getFullYear()+"-"+String(l.getMonth()+1).padStart(2,"0")+"-"+String(l.getDate()).padStart(2,"0");this.http.patch(s,{status_id:r,approval_date:p}).subscribe(n=>{n&&n.data&&n.data.approval_id?this.curdConfig.tableConfig.reload():console.error("Error: Approval ID not found in response:",n)},n=>{console.error("HTTP error:",n),alert("An error occurred while updating the leave status.")})}bulkApproval(){console.log("bulk Ids",this.curdConfig.tableConfig.checkedRows),this.curdConfig.tableConfig.reload()}}return u.\u0275fac=function(s){return new(s||u)(t.Y36(e.eN))},u.\u0275cmp=t.Xpm({type:u,selectors:[["app-leave-approvals"]],outputs:{edit:"edit",circle:"circle"},standalone:!0,features:[t.jDz],decls:12,vars:2,consts:[[1,"container-fluid","pt-3"],[1,"row"],[1,"col-12","p-0"],[1,"custom-list",3,"options"],["after-search","",1,"after-search","me-2"],["class","btn btn-primary text-nowrap",3,"click",4,"ngIf"],["before-search","",1,"before-search","me-2"],[1,"btn","btn-primary","text-nowrap",3,"click"],["bottom-left","",1,"bottom-left","me-2"]],template:function(s,r){1&s&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"ta-curd-modal",3)(4,"div",4),t.YNc(5,y,2,1,"button",5),t.qZA(),t.TgZ(6,"div",6)(7,"button",7),t.NdJ("click",function(){return r.curdConfig.tableConfig.reload()}),t._uU(8,"Reload Table"),t.qZA()(),t.TgZ(9,"div",8)(10,"button",7),t.NdJ("click",function(){return r.curdConfig.tableConfig.reload()}),t._uU(11,"reload"),t.qZA()()()()()()),2&s&&(t.xp6(3),t.Q6J("options",r.curdConfig),t.xp6(2),t.Q6J("ngIf",(null==r.curdConfig||null==r.curdConfig.tableConfig?null:r.curdConfig.tableConfig.checkedRows)&&(null==r.curdConfig.tableConfig||null==r.curdConfig.tableConfig.checkedRows?null:r.curdConfig.tableConfig.checkedRows.length)>0))},dependencies:[i.ez,i.O5,c.l,C.h]}),u})()},1050:(O,g,a)=>{a.d(g,{l:()=>y});var i=a(5879),t=a(6814),c=a(3929),e=a(7871),C=a(2787);let y=(()=>{class _{refreshTable(){this.taTableComponent?.refresh()}constructor(m){this.router=m,this.edit=new i.vpe,this.tableConfig={apiUrl:"hrms/swipes/",showCheckbox:!0,pkId:"swipe_id",pageSize:10,globalSearch:{keys:["swipe_time","employee_id"]},defaultSort:{key:"created_at",value:"descend"},cols:[{fieldKey:"swipe_time",name:"Swipe Time",sort:!0},{fieldKey:"employee_id",name:"Employee",sort:!0,displayType:"map",mapFn:(s,r,l)=>`${r.employee?.first_name||""} ${r.employee?.last_name||""}`.trim()},{fieldKey:"code",name:"Action",type:"action",actions:[{type:"delete",label:"Delete",apiUrl:"hrms/swipes",confirm:!0,confirmMsg:"Sure to delete?"},{type:"callBackFn",icon:"fa fa-pen",label:"",callBackFn:(s,r)=>{console.log(s),this.edit.emit(s.swipe_id)}}]}]}}}return _.\u0275fac=function(m){return new(m||_)(i.Y36(C.F0))},_.\u0275cmp=i.Xpm({type:_,selectors:[["app-swipes-list"]],viewQuery:function(m,s){if(1&m&&i.Gf(e.Z,5),2&m){let r;i.iGM(r=i.CRH())&&(s.taTableComponent=r.first)}},outputs:{edit:"edit"},standalone:!0,features:[i.jDz],decls:1,vars:1,consts:[[1,"custom-list",3,"options"]],template:function(m,s){1&m&&i._UZ(0,"ta-table",0),2&m&&i.Q6J("options",s.tableConfig)},dependencies:[t.ez,c.l,e.Z]}),_})()},2233:(O,g,a)=>{a.r(g),a.d(g,{SwipesComponent:()=>r});var i=a(6814),t=a(3929),c=a(1050),e=a(5879),C=a(9862),y=a(7127);function _(l,p){1&l&&(e.TgZ(0,"span",17),e._uU(1,"Update Swipes"),e.qZA())}function u(l,p){1&l&&(e.TgZ(0,"span",17),e._uU(1,"Create Swipes"),e.qZA())}function m(l,p){if(1&l&&(e.TgZ(0,"div",18),e._UZ(1,"ta-form",19),e.qZA()),2&l){const o=e.oxw();e.xp6(1),e.Q6J("options",o.formConfig)}}function s(l,p){if(1&l){const o=e.EpF();e.TgZ(0,"div",20)(1,"app-swipes-list",21),e.NdJ("edit",function(h){e.CHM(o);const T=e.oxw();return e.KtG(T.editSwipes(h))}),e.qZA()()}}let r=(()=>{class l{constructor(o){this.http=o,this.showSwipesList=!1,this.showForm=!1,this.formConfig={}}ngOnInit(){this.showSwipesList=!1,this.showForm=!0,this.SwipesEditID=null,this.setFormConfig(),console.log("this.formConfig",this.formConfig)}hide(){document.getElementById("modalClose").click()}editSwipes(o){console.log("event",o),this.SwipesEditID=o,this.http.get("hrms/swipes/"+o).subscribe(n=>{n&&(this.formConfig.model=n,this.formConfig.showActionBtn=!0,this.formConfig.pkId="swipe_id",this.formConfig.submit.label="Update",this.showForm=!0)}),this.hide()}showSwipesListFn(){this.showSwipesList=!0,this.SwipesListComponent?.refreshTable()}setFormConfig(){this.SwipesEditID=null,this.formConfig={url:"hrms/swipes/",formState:{viewMode:!1},showActionBtn:!0,exParams:[{key:"employee_id",type:"script",value:"data.employee.employee_id"}],submit:{label:"Submit",submittedFn:()=>this.ngOnInit()},reset:{resetFn:()=>{this.ngOnInit()}},model:{},fields:[{fieldGroupClassName:"ant-row custom-form-block px-0 mx-0",fieldGroup:[{key:"employee",type:"select",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Employee",dataKey:"employee_id",dataLabel:"first_name",options:[],lazy:{url:"hrms/employees/",lazyOneTime:!0},required:!0},hooks:{onInit:o=>{}}},{key:"swipe_time",type:"input",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Swipe Time",type:"datetime-local",placeholder:"Select Swipe Date and Time",required:!1}}]}]}}}return l.\u0275fac=function(o){return new(o||l)(e.Y36(C.eN))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-swipes"]],viewQuery:function(o,n){if(1&o&&e.Gf(c.l,5),2&o){let h;e.iGM(h=e.CRH())&&(n.SwipesListComponent=h.first)}},standalone:!0,features:[e.jDz],decls:21,vars:4,consts:[[1,"container-fluid","p-3"],[1,"swipes-banner"],[1,"col-12","px-0",2,"display","flex","justify-content","space-between","align-items","center","flex-wrap","wrap"],["type","button",1,"btn","pl-0"],["class","custom-heading",4,"ngIf"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-primary",3,"click"],[1,"row","custom-form"],["class","col-12 px-1",4,"ngIf"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade","custom-modal"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","id","modalClose","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger"],[1,"custom-heading"],[1,"col-12","px-1"],[3,"options"],[1,"modal-body"],[1,"custom-list",3,"edit"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),e.YNc(4,_,2,0,"span",4),e.YNc(5,u,2,0,"span",4),e.qZA(),e.TgZ(6,"button",5),e.NdJ("click",function(){return n.showSwipesListFn()}),e._uU(7," Swipes List "),e.qZA()()(),e.TgZ(8,"div",6),e.YNc(9,m,2,1,"div",7),e.qZA()(),e.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e._uU(15,"Swipes List"),e.qZA(),e._UZ(16,"button",13),e.qZA(),e.YNc(17,s,2,0,"div",14),e.TgZ(18,"div",15)(19,"button",16),e._uU(20,"Close"),e.qZA()()()()()),2&o&&(e.xp6(4),e.Q6J("ngIf",n.SwipesEditID),e.xp6(1),e.Q6J("ngIf",!n.SwipesEditID),e.xp6(4),e.Q6J("ngIf",n.showForm),e.xp6(8),e.Q6J("ngIf",n.showSwipesList))},dependencies:[i.ez,i.O5,t.l,y.C,c.l]}),l})()},2351:(O,g,a)=>{a.r(g),a.d(g,{MachinesComponent:()=>c});var i=a(5879),t=a(5581);let c=(()=>{class e{constructor(){this.curdConfig={drawerSize:500,drawerPlacement:"top",tableConfig:{apiUrl:"production/machines/",title:"Machines",pkId:"machine_id",pageSize:10,globalSearch:{keys:["machine_id","machine_name","description","status"]},defaultSort:{key:"created_at",value:"descend"},cols:[{fieldKey:"machine_name",name:"Machine Name",sort:!0},{fieldKey:"description",name:"Description",sort:!0},{fieldKey:"status",name:"status",sort:!0},{fieldKey:"code",name:"Action",type:"action",actions:[{type:"delete",label:"Delete",confirm:!0,confirmMsg:"Sure to delete?",apiUrl:"production/machines"},{type:"edit",label:"Edit"}]}]},formConfig:{url:"production/machines/",title:"Machine",pkId:"machine_id",exParams:[],fields:[{fieldGroupClassName:"row col-12 p-0 m-0 custom-form field-no-bottom-space",fieldGroup:[{key:"machine_name",type:"input",className:"col-md-6 col-12 px-1 mb-3",templateOptions:{label:"Machine Name",placeholder:"Enter Machine Name",required:!0}},{key:"status",type:"select",className:"col-md-6 col-12 px-1 mb-3",templateOptions:{label:"Status",placeholder:"Enter Status",required:!1,options:[{value:"Operational",label:"Operational"},{value:"Under Maintenance",label:"Under Maintenance"},{value:"Out of Service",label:"Out of Service"}]}},{key:"description",type:"textarea",className:"col-md-6 col-12 px-1",templateOptions:{label:"Description",placeholder:"Enter Description",required:!1}}]}]}}}}return e.\u0275fac=function(y){return new(y||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-machines"]],decls:4,vars:1,consts:[[1,"container-fluid","pt-3"],[1,"row"],[1,"col-12","p-0"],[1,"custom-list",3,"options"]],template:function(y,_){1&y&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2),i._UZ(3,"ta-curd-modal",3),i.qZA()()()),2&y&&(i.xp6(3),i.Q6J("options",_.curdConfig))},dependencies:[t.h]}),e})()},1489:(O,g,a)=>{a.r(g),a.d(g,{ProductionStatusesComponent:()=>c});var i=a(5879),t=a(5581);let c=(()=>{class e{constructor(){this.curdConfig={drawerSize:500,drawerPlacement:"top",tableConfig:{apiUrl:"production/production_statuses/",title:"Production Statuses",pkId:"status_id",pageSize:10,globalSearch:{keys:["status_id","status_name"]},defaultSort:{key:"created_at",value:"descend"},cols:[{fieldKey:"status_name",name:"Status Name",sort:!0},{fieldKey:"code",name:"Action",type:"action",actions:[{type:"delete",label:"Delete",confirm:!0,confirmMsg:"Sure to delete?",apiUrl:"production/production_statuses"},{type:"edit",label:"Edit"}]}]},formConfig:{url:"production/production_statuses/",title:"Production Statuses",pkId:"status_id",exParams:[],fields:[{fieldGroupClassName:"row col-12 p-0 m-0 custom-form field-no-bottom-space",fieldGroup:[{key:"status_name",type:"input",className:"col-md-6 p-0 col-12",templateOptions:{label:"Status Name",placeholder:"Enter Status Name",required:!0}}]}]}}}}return e.\u0275fac=function(y){return new(y||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-production-statuses"]],decls:4,vars:1,consts:[[1,"container-fluid","pt-3"],[1,"row"],[1,"col-12","p-0"],[1,"custom-list",3,"options"]],template:function(y,_){1&y&&(i.TgZ(0,"div",0)(1,"div",1)(2,"div",2),i._UZ(3,"ta-curd-modal",3),i.qZA()()()),2&y&&(i.xp6(3),i.Q6J("options",_.curdConfig))},dependencies:[t.h]}),e})()},9443:(O,g,a)=>{a.r(g),a.d(g,{WorkorderboardComponent:()=>M});var i=a(6814),t=a(5879),c=a(3929),e=a(2787),C=a(9862),y=a(7871);function _(f,b){if(1&f){const d=t.EpF();t.TgZ(0,"div",4)(1,"div",5)(2,"h5")(3,"b"),t._uU(4,"Confirm Work Order Completion"),t.qZA()(),t.TgZ(5,"p"),t._uU(6,"Are you sure you want to mark the work order for "),t.TgZ(7,"b"),t._uU(8),t.qZA(),t._uU(9," as done?"),t.qZA(),t.TgZ(10,"div",6)(11,"button",7),t.NdJ("click",function(){t.CHM(d);const E=t.oxw();return t.KtG(E.closeModal())}),t._uU(12,"Cancel"),t.qZA(),t.TgZ(13,"button",8),t.NdJ("click",function(){t.CHM(d);const E=t.oxw();return t.KtG(E.confirmDispatch())}),t._uU(14,"Confirm"),t.qZA()()()()}if(2&f){const d=t.oxw();t.xp6(8),t.Oqu(null==d.selectedOrder||null==d.selectedOrder.product?null:d.selectedOrder.product.name)}}function u(f,b){if(1&f&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&f){const d=b.$implicit;t.xp6(1),t.Oqu(d.label)}}function m(f,b){if(1&f&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&f){const d=b.$implicit,v=t.oxw(2);let E;t.xp6(1),t.hij(" ",null!==(E=v.getNestedValue(null==v.workOrderData?null:v.workOrderData.work_order,d.key))&&void 0!==E?E:d.defaultValue," ")}}function s(f,b){if(1&f&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&f){const d=b.$implicit;t.xp6(1),t.Oqu(d.label)}}function r(f,b){if(1&f&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&f){const d=b.$implicit,v=t.oxw().$implicit,E=t.oxw(2);t.xp6(1),t.hij(" ",E.getNestedValue(v,d.key)||""," ")}}function l(f,b){if(1&f&&(t.TgZ(0,"tr"),t.YNc(1,r,2,1,"td",17),t.qZA()),2&f){const d=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",d.tableFields.bom)}}function p(f,b){if(1&f&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&f){const d=b.$implicit;t.xp6(1),t.Oqu(d.label)}}function o(f,b){if(1&f&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&f){const d=b.$implicit,v=t.oxw().$implicit,E=t.oxw(2);t.xp6(1),t.hij(" ",E.getNestedValue(v,d.key)||"N/A"," ")}}function n(f,b){if(1&f&&(t.TgZ(0,"tr"),t.YNc(1,o,2,1,"td",17),t.qZA()),2&f){const d=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",d.tableFields.workers)}}function h(f,b){if(1&f&&(t.TgZ(0,"th"),t._uU(1),t.qZA()),2&f){const d=b.$implicit;t.xp6(1),t.Oqu(d.label)}}function T(f,b){if(1&f&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&f){const d=b.$implicit,v=t.oxw().$implicit,E=t.oxw(2);t.xp6(1),t.hij(" ",E.getNestedValue(v,d.key)||""," ")}}function L(f,b){if(1&f&&(t.TgZ(0,"tr"),t.YNc(1,T,2,1,"td",17),t.qZA()),2&f){const d=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",d.tableFields.stages)}}function A(f,b){if(1&f){const d=t.EpF();t.TgZ(0,"div",9)(1,"div",10),t.NdJ("click",function(E){return E.stopPropagation()}),t.TgZ(2,"div",11)(3,"div",12)(4,"h5",13),t._uU(5,"WORK ORDER DETAILS"),t.qZA()(),t.TgZ(6,"div",14)(7,"h5"),t._uU(8,"Work Order"),t.qZA(),t.TgZ(9,"div",15)(10,"table",16)(11,"thead")(12,"tr"),t.YNc(13,u,2,1,"th",17),t.qZA()(),t.TgZ(14,"tbody")(15,"tr"),t.YNc(16,m,2,1,"td",17),t.qZA()()()(),t.TgZ(17,"h5"),t._uU(18,"Bill Of Materials"),t.qZA(),t.TgZ(19,"div",15)(20,"table",16)(21,"thead")(22,"tr"),t.YNc(23,s,2,1,"th",17),t.qZA()(),t.TgZ(24,"tbody"),t.YNc(25,l,2,1,"tr",17),t.qZA()()(),t.TgZ(26,"h5"),t._uU(27,"Workers"),t.qZA(),t.TgZ(28,"div",15)(29,"table",16)(30,"thead")(31,"tr"),t.YNc(32,p,2,1,"th",17),t.qZA()(),t.TgZ(33,"tbody"),t.YNc(34,n,2,1,"tr",17),t.qZA()()(),t.TgZ(35,"h5"),t._uU(36,"Work Stages"),t.qZA(),t.TgZ(37,"div",15)(38,"table",16)(39,"thead")(40,"tr"),t.YNc(41,h,2,1,"th",17),t.qZA()(),t.TgZ(42,"tbody"),t.YNc(43,L,2,1,"tr",17),t.qZA()()()(),t.TgZ(44,"div",18)(45,"button",19),t.NdJ("click",function(){t.CHM(d);const E=t.oxw();return t.KtG(E.closeEditModal())}),t._uU(46,"Close"),t.qZA()()()()()}if(2&f){const d=t.oxw();t.xp6(13),t.Q6J("ngForOf",d.tableFields.workOrder),t.xp6(3),t.Q6J("ngForOf",d.tableFields.workOrder),t.xp6(7),t.Q6J("ngForOf",d.tableFields.bom),t.xp6(2),t.Q6J("ngForOf",null==d.workOrderData?null:d.workOrderData.bom),t.xp6(7),t.Q6J("ngForOf",d.tableFields.workers),t.xp6(2),t.Q6J("ngForOf",null==d.workOrderData?null:d.workOrderData.workers),t.xp6(7),t.Q6J("ngForOf",d.tableFields.stages),t.xp6(2),t.Q6J("ngForOf",null==d.workOrderData?null:d.workOrderData.work_order_stages)}}const D={workOrder:[{key:"product.name",label:"Product Name"},{key:"size.size_name",label:"Size"},{key:"color.color_name",label:"Color"},{key:"quantity",label:"Quantity"},{key:"completed_qty",label:"Completed Quantity",defaultValue:0},{key:"status.status_name",label:"Status"},{key:"start_date",label:"Start Date"},{key:"end_date",label:"End Date"}],workers:[{key:"employee.first_name",label:"Employee"},{key:"hours_worked",label:"Hours Worked"}],bom:[{key:"product.name",label:"Product Name"},{key:"product.code",label:"Product Code"},{key:"product.print_name",label:"Print Name"},{key:"size.size_name",label:"Size"},{key:"color.color_name",label:"Color"},{key:"quantity",label:"Quantity"},{key:"unit_cost",label:"Unit Cost"},{key:"total_cost",label:"Total Cost"},{key:"notes",label:"Notes"}],stages:[{key:"stage_name",label:"Stage Name"},{key:"stage_description",label:"Description"},{key:"stage_start_date",label:"Start Date"},{key:"stage_end_date",label:"End Date"},{key:"notes",label:"Notes"}]};let M=(()=>{class f{constructor(d,v){this.router=d,this.http=v,this.isLoading=!0,this.showModal=!1,this.showEditModal=!1,this.selectedOrder=null,this.workOrderData=null,this.tableFields=D,this.view=new t.vpe,this.curdConfig=this.getCurdConfig()}ngOnInit(){this.isLoading=!1}getNestedValue(d,v){return v.split(".").reduce((E,x)=>E?.[x],d)}viewWorkOrder(d){this.selectedWorkOrderId=d,this.showEditModal=!0,this.workOrderData=null,this.http.get(`production/work_order/${d}`).subscribe({next:v=>{this.workOrderData=v?.data??null},error:v=>{console.error("Error fetching work order:",v)}})}closeEditModal(){this.showEditModal=!1}openModal(d){this.selectedOrder=d,this.showModal=!0}closeModal(){this.showModal=!1,this.selectedOrder=null}confirmDispatch(){if(this.selectedOrder){const d=this.selectedOrder.sale_order_id;this.http.post(`sales/SaleOrder/${d}/move_next_stage/`,{}).subscribe(()=>{console.log("Dispatch confirmed for order:",d),this.closeModal(),this.curdConfig=this.getCurdConfig()},E=>{console.error("Error in confirming dispatch:",E),alert("Failed to confirm dispatch. Please try again.")})}}getCurdConfig(){return{drawerSize:500,drawerPlacement:"right",tableConfig:{apiUrl:"production/work_order/?summary=true&flow_status=Production",title:"Work Order Board",pkId:"work_order_id",pageSize:10,globalSearch:{keys:["product","quantity","status_id","start_date","end_date"]},defaultSort:{key:"created_at",value:"descend"},cols:[{fieldKey:"product",name:"Product",displayType:"map",mapFn:(d,v)=>`${v.product.name}`,sort:!0},{fieldKey:"quantity",name:"Quantity",sort:!0},{fieldKey:"status_id",name:"Status",displayType:"map",mapFn:(d,v)=>`${v.status.status_name}`,sort:!0},{fieldKey:"start_date",name:"Start Date",sort:!0},{fieldKey:"end_date",name:"End Date",sort:!0},{fieldKey:"actions",name:"Actions",type:"action",actions:[{type:"callBackFn",label:"Done",callBackFn:d=>this.openModal(d)},{type:"callBackFn",label:"View",callBackFn:d=>this.viewWorkOrder(d.work_order_id)}]}]},formConfig:{url:"sales/sale_order/{saleOrderId}/move_next_stage/",title:"Work Order Confirmation",pkId:"sale_order_id",fields:[{key:"sale_order_id",type:"text"},{key:"confirmation",type:"select",defaultValue:"yes"}]}}}}return f.\u0275fac=function(d){return new(d||f)(t.Y36(e.F0),t.Y36(C.eN))},f.\u0275cmp=t.Xpm({type:f,selectors:[["app-workorderboard"]],outputs:{view:"view"},standalone:!0,features:[t.jDz],decls:4,vars:3,consts:[[1,"work-order-board"],[1,"custom-list",3,"options"],["class","custom-dialog-overlay",4,"ngIf"],["class","custom-dialog-overlay","role","dialog","aria-hidden","true",4,"ngIf"],[1,"custom-dialog-overlay"],[1,"custom-dialog-box","small-dialog-box"],[1,"dialog-actions"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click"],["role","dialog","aria-hidden","true",1,"custom-dialog-overlay"],[1,"modal-dialog","modal-xl",3,"click"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],[1,"overflow-auto","d-block","mb-md-3","mb-2"],[1,"table","table-bordered","custom-table","mb-0"],[4,"ngFor","ngForOf"],[1,"modal-footer","text-center"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(d,v){1&d&&(t.TgZ(0,"div",0),t._UZ(1,"ta-table",1),t.YNc(2,_,15,1,"div",2),t.YNc(3,A,47,8,"div",3),t.qZA()),2&d&&(t.xp6(1),t.Q6J("options",v.curdConfig.tableConfig),t.xp6(1),t.Q6J("ngIf",v.showModal),t.xp6(1),t.Q6J("ngIf",v.showEditModal))},dependencies:[i.ez,i.sg,i.O5,c.l,y.Z],styles:[".work-order-board[_ngcontent-%COMP%]{padding:15px}.custom-dialog-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,.9);z-index:1000;display:flex;align-items:center;justify-content:center}.custom-dialog-box[_ngcontent-%COMP%]{position:relative;max-width:90%;width:100%;max-height:90vh;overflow-y:auto;background-color:#fff;border-radius:8px;box-shadow:0 2px 15px #000000e6;text-align:left;display:flex;flex-direction:column}.small-dialog-box[_ngcontent-%COMP%]{max-width:400px;padding:20px;box-shadow:0 2px 10px #000000e6;text-align:center;overflow:hidden}.custom-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-family:Arial,sans-serif;margin-bottom:20px}.custom-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .custom-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px;text-align:left;border:1px solid #ddd}.custom-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{height:5px}.custom-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#170564;color:#fff;font-weight:400}.custom-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even){background-color:#f2f2f2}.custom-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f9f9f9}.modal-dialog[_ngcontent-%COMP%]{width:80%;max-width:1200px;height:80%;max-height:800px;margin:auto;overflow:hidden}@media (max-width: 767px){.modal-dialog[_ngcontent-%COMP%]{height:98%;width:98%;max-height:98%}}.modal-content[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}.modal-body[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:15px;overflow-x:hidden}.modal-body[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10px;font-size:18px;font-weight:400;color:#333}.dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:20px;margin-top:15px}@media (max-width: 1024px){.table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{min-width:150px}}"]}),f})()},8810:(O,g,a)=>{a.d(g,{d:()=>y});var i=a(5879),t=a(6814),c=a(3929),e=a(7871),C=a(2787);let y=(()=>{class _{refreshTable(){this.taTableComponent?.refresh()}constructor(m){this.router=m,this.edit=new i.vpe,this.circle=new i.vpe,this.tableConfig={apiUrl:"reminders/reminders/",showCheckbox:!0,pkId:"reminder_id",pageSize:10,globalSearch:{keys:["reminder_type_id","subject","description","reminder_date","recurring_frequency"]},cols:[{fieldKey:"reminder_type_id",name:"Reminders",sort:!0,displayType:"map",mapFn:(s,r,l)=>`${r.reminder_type.type_name}`},{fieldKey:"subject",name:"Subject",sort:!0},{fieldKey:"description",name:"Description",sort:!0},{fieldKey:"reminder_date",name:"Reminder Date",sort:!0,displayType:"datetime-local"},{fieldKey:"recurring_frequency",name:"Recurring Frequency",sort:!0},{fieldKey:"code",name:"Action",type:"action",actions:[{type:"delete",label:"Delete",apiUrl:"reminders/reminders",confirm:!0,confirmMsg:"Sure to delete?"},{type:"callBackFn",icon:"fa fa-pen",label:"",callBackFn:(s,r)=>{console.log(s),this.edit.emit(s.reminder_id)}}]}]}}}return _.\u0275fac=function(m){return new(m||_)(i.Y36(C.F0))},_.\u0275cmp=i.Xpm({type:_,selectors:[["app-reminders-list"]],viewQuery:function(m,s){if(1&m&&i.Gf(e.Z,5),2&m){let r;i.iGM(r=i.CRH())&&(s.taTableComponent=r.first)}},outputs:{edit:"edit",circle:"circle"},standalone:!0,features:[i.jDz],decls:1,vars:1,consts:[[3,"options"]],template:function(m,s){1&m&&i._UZ(0,"ta-table",0),2&m&&i.Q6J("options",s.tableConfig)},dependencies:[t.ez,c.l,e.Z]}),_})()},646:(O,g,a)=>{a.r(g),a.d(g,{RemindersComponent:()=>r});var i=a(6814),t=a(3929),c=a(8810),e=a(5879),C=a(9862),y=a(7127);function _(l,p){1&l&&(e.TgZ(0,"span",17),e._uU(1,"Update Reminders"),e.qZA())}function u(l,p){1&l&&(e.TgZ(0,"span",17),e._uU(1,"Create Reminders"),e.qZA())}function m(l,p){if(1&l&&(e.TgZ(0,"div",18),e._UZ(1,"ta-form",19),e.qZA()),2&l){const o=e.oxw();e.xp6(1),e.Q6J("options",o.formConfig)}}function s(l,p){if(1&l){const o=e.EpF();e.TgZ(0,"div",20)(1,"app-reminders-list",21),e.NdJ("edit",function(h){e.CHM(o);const T=e.oxw();return e.KtG(T.editReminders(h))}),e.qZA()()}}let r=(()=>{class l{constructor(o){this.http=o,this.showRemindersList=!1,this.showForm=!1,this.formConfig={}}ngOnInit(){this.showRemindersList=!1,this.showForm=!0,this.RemindersEditID=null,this.setFormConfig(),console.log("this.formConfig",this.formConfig),this.formConfig.fields[2].hide=!0}hide(){document.getElementById("modalClose").click()}editReminders(o){this.RemindersEditID=o,this.http.get("reminders/reminders/"+o).subscribe(n=>{n&&n.data&&(this.formConfig.model=n.data,this.formConfig.pkId="reminder_id",this.formConfig.submit.label="Update",this.formConfig.model.reminder_id=this.RemindersEditID,this.showForm=!0,this.formConfig.fields[2].hide=!1)}),this.hide()}showRemindersListFn(){this.showRemindersList=!0,this.RemindersListComponent?.refreshTable()}setFormConfig(){this.RemindersEditID=null,this.formConfig={url:"reminders/reminders/",formState:{viewMode:!1},showActionBtn:!0,exParams:[],submit:{label:"Submit",submittedFn:()=>this.ngOnInit()},reset:{resetFn:()=>{this.ngOnInit()}},model:{reminders:{},reminder_recipients:[{}],reminder_logs:{}},fields:[{fieldGroupClassName:"ant-row custom-form-block px-0 mx-0",key:"reminders",fieldGroup:[{key:"reminder_type",type:"select",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Reminder Types",dataKey:"reminder_type_id",dataLabel:"type_name",options:[],lazy:{url:"reminders/reminder_types/",lazyOneTime:!0},required:!0},hooks:{onChanges:o=>{o.formControl.valueChanges.subscribe(n=>{this.formConfig&&this.formConfig.model&&this.formConfig.model.reminders?this.formConfig.model.reminders.reminder_type_id=n.reminder_type_id:console.error("Form config or Reminder Types data model is not defined.")})}}},{key:"subject",type:"input",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Subject",placeholder:"Enter Subject",required:!0}},{key:"description",type:"textarea",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Description",placeholder:"Enter Description",required:!1}},{key:"reminder_date",type:"input",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Reminder Date",type:"datetime-local",placeholder:"Select Reminder Date and Time",required:!0}},{key:"is_recurring",type:"checkbox",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Is Recurring",required:!1}},{key:"recurring_frequency",type:"select",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Recurring Frequency",placeholder:"Select Recurring Frequency",required:!0,options:[{value:"Daily",label:"Daily"},{value:"Monthly",label:"Monthly"},{value:"Weekly",label:"Weekly"},{value:"Yearly",label:"Yearly"}]}}]},{key:"reminder_recipients",type:"table",className:"custom-form-list no-ant-card",templateOptions:{title:"Reminder Recipients",addText:"Add Recipients",tableCols:[{name:"recipient_user",label:"Recipient User"},{name:"recipient_email",label:"Recipient Email"},{name:"notification_method",label:"Notification Method"}]},fieldArray:{fieldGroup:[{key:"recipient_user",type:"select",templateOptions:{label:"Recipient User",dataKey:"employee_id",dataLabel:"name",options:[],hideLabel:!0,required:!0,lazy:{url:"hrms/employees/",lazyOneTime:!0}},hooks:{onInit:o=>{o.formControl.valueChanges.subscribe(n=>{n&&n.employee_id&&(this.formConfig.model.reminder_recipients[o.parent.key].recipient_user_id=n.employee_id),o.form.controls.recipient_email.setValue(n.email?n.email:"")})}}},{key:"recipient_email",type:"input",templateOptions:{label:"Recipient Email",dataKey:"email",placeholder:"Enter Email",hideLabel:!0,required:!0},hooks:{onInit:o=>{}}},{key:"notification_method",type:"select",templateOptions:{label:"Notification Method",dataKey:"method_id",dataLabel:"method_name",options:[],hideLabel:!0,required:!0,lazy:{url:"reminders/notification_methods/",lazyOneTime:!0}},hooks:{onChanges:o=>{o.formControl.valueChanges.subscribe(n=>{const h=o.parent.key;n&&n.method_id&&(this.formConfig&&this.formConfig.model&&this.formConfig.model.reminder_recipients?(this.formConfig.model.reminder_recipients[h]||(this.formConfig.model.reminder_recipients[h]={}),this.formConfig.model.reminder_recipients[h].notification_method_id=n.method_id):console.error("Form config or reminder_recipients data model is not defined."))})}}}]}},{fieldGroupClassName:"ant-row custom-form-block",key:"reminder_logs",fieldGroup:[{key:"log_action",type:"select",className:"col-md-4 col-sm-6 col-12",templateOptions:{label:"Log Action",placeholder:"Select Log Action",required:!0,options:[{value:"Cancelled",label:"Cancelled"},{value:"Created",label:"Created"},{value:"Dismissed",label:"Dismissed"},{value:"Rescheduled",label:"Rescheduled"},{value:"Viewed",label:"Viewed"}]}}]}]}}}return l.\u0275fac=function(o){return new(o||l)(e.Y36(C.eN))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-reminders"]],viewQuery:function(o,n){if(1&o&&e.Gf(c.d,5),2&o){let h;e.iGM(h=e.CRH())&&(n.RemindersListComponent=h.first)}},standalone:!0,features:[e.jDz],decls:21,vars:4,consts:[[1,"container-fluid","p-3"],[1,"reminders-banner"],[1,"col-12","px-0",2,"display","flex","justify-content","space-between","align-items","center","flex-wrap","wrap"],["type","button",1,"btn","pl-0",2,"color","black",3,"click"],["class","custom-heading",4,"ngIf"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-primary",3,"click"],[1,"row","custom-form"],["class","col-12 px-1",4,"ngIf"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade","custom-modal"],[1,"modal-dialog","modal-xl"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","id","modalClose","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],["class","modal-body",4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger"],[1,"custom-heading"],[1,"col-12","px-1"],[3,"options"],[1,"modal-body"],[1,"custom-list",3,"edit"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),e.NdJ("click",function(){return n.RemindersEditID=null}),e.YNc(4,_,2,0,"span",4),e.YNc(5,u,2,0,"span",4),e.qZA(),e.TgZ(6,"button",5),e.NdJ("click",function(){return n.showRemindersListFn()}),e._uU(7," Reminders List "),e.qZA()()(),e.TgZ(8,"div",6),e.YNc(9,m,2,1,"div",7),e.qZA()(),e.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"h5",12),e._uU(15,"Edit Reminders List"),e.qZA(),e._UZ(16,"button",13),e.qZA(),e.YNc(17,s,2,0,"div",14),e.TgZ(18,"div",15)(19,"button",16),e._uU(20,"Close"),e.qZA()()()()()),2&o&&(e.xp6(4),e.Q6J("ngIf",n.RemindersEditID),e.xp6(1),e.Q6J("ngIf",!n.RemindersEditID),e.xp6(4),e.Q6J("ngIf",n.showForm),e.xp6(8),e.Q6J("ngIf",n.showRemindersList))},dependencies:[i.ez,i.O5,t.l,y.C,c.d]}),l})()},523:(O,g,a)=>{a.r(g),a.d(g,{UsergroupsComponent:()=>C});var i=a(6814),t=a(3929),c=a(5879),e=a(5581);let C=(()=>{class y{constructor(){this.curdConfig={drawerSize:500,drawerPlacement:"top",tableConfig:{apiUrl:"masters/user_groups/",title:"User Groups",pkId:"group_id",pageSize:10,globalSearch:{keys:["group_id","group_name","description"]},defaultSort:{key:"created_at",value:"descend"},cols:[{fieldKey:"group_name",name:"Group Name",sort:!0},{fieldKey:"description",name:"Description",sort:!0},{fieldKey:"code",name:"Action",type:"action",actions:[{type:"delete",label:"Delete",confirm:!0,confirmMsg:"Sure to delete?",apiUrl:"masters/user_groups"},{type:"edit",label:"Edit"}]}]},formConfig:{url:"masters/user_groups/",title:"User Groups",pkId:"group_id",exParams:[],fields:[{fieldGroupClassName:"row col-12 p-0 m-0 custom-form field-no-bottom-space",fieldGroup:[{key:"group_name",type:"input",className:"col-md-6 col-12 px-1 pb-3 pb-md-0",templateOptions:{label:"Group Name",placeholder:"Enter Group Name",required:!0}},{key:"description",type:"textarea",className:"col-md-6 col-12 px-1",templateOptions:{label:"Description",placeholder:"Enter Description",required:!0}}]}]}}}}return y.\u0275fac=function(u){return new(u||y)},y.\u0275cmp=c.Xpm({type:y,selectors:[["app-usergroups"]],standalone:!0,features:[c.jDz],decls:4,vars:1,consts:[[1,"container-fluid","pt-3"],[1,"row"],[1,"col-12","p-0"],[1,"custom-list",3,"options"]],template:function(u,m){1&u&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2),c._UZ(3,"ta-curd-modal",3),c.qZA()()()),2&u&&(c.xp6(3),c.Q6J("options",m.curdConfig))},dependencies:[i.ez,t.l,e.h]}),y})()}}]);