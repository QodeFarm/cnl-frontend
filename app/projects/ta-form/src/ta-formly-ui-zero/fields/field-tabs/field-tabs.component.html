<!-- <div class="tab-inner">
    <ul class="nav nav-tabs" role="tablist">
        <li class="nav-item" >
            <a class="nav-link" [class.active]="i === activeTab" (click)="selectTab(i)" role="tab">
            {{ tab.templateOptions?.label || 'Tab ' + (i + 1) }}
        </a>
        </li>
    </ul>

    <div class="tab-content">
        <div class="tab-pane fade" [class.show]="i === activeTab" [class.active]="i === activeTab" *ngFor="let tab of field.fieldGroup; let i = index" role="tabpanel">
            <formly-field [field]="tab"></formly-field>
        </div>
    </div>
</div> -->

<div class="tab-inner">
    <nz-tabset [(nzSelectedIndex)]="activeTab">

        <nz-tab *ngFor="let tab of field.fieldGroup; let i = index" [nzTitle]="titleTemplate" (nzClick)="selectTab(i)">
            <ng-template #titleTemplate>
                <span class="tab-title" [ngClass]="{ 'tab-error': shouldShowError(tab) }">
                    {{ tab.props?.label || 'Tab ' + (i + 1) }}
                    <span *ngIf="shouldShowError(tab) && countErrors(tab) > 0" class="error-count">{{ countErrors(tab) }}</span>
                </span>
            </ng-template>
            <formly-field [field]="tab"></formly-field>
        </nz-tab>
    </nz-tabset>
</div>